zabbix_export:
  version: '7.0'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: b21f90a161ca4330a2d0858b9fb52b44
    template: Oracle by ODBC ORA
    name: Oracle by ODBC ORA
    description: |
      1. Create an Oracle user for monitoring.

      2. Set the hostname or IP address of the Oracle DB instance, user name and password in host macros ({$ORACLE.HOST}, {$ORACLE.USER} and {$ORACLE.PASSWORD}).
        Do not forget to install the Microsoft ODBC driver on the Zabbix server or the Zabbix proxy.
        See Oracle documentation for instructions: https://www.oracle.com/database/technologies/releasenote-odbc-ic.html.

        Note! Credentials in the odbc.ini do not work for Oracle.
        Note! Be sure that ODBC connects to Oracle with session parameter NLS_NUMERIC_CHARACTERS= '.,' It is important for correct display float numbers in Zabbix.
      The "Service's TCP port state" item uses {$ORACLE.HOST} and {$ORACLE.PORT} macros to check the availability of the listener.

      Generated by official Zabbix template tool "Templator"
    groups:
    - name: Templates/Databases
    items:
    - uuid: ccadecf9ec6049f8b3e3ffcda7766c77
      name: Get archive log
      type: ODBC
      key: 
        db.odbc.get[get_archivelog,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT d.dest_name
        FROM v$archive_dest d , v$database db WHERE d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the destinations of the log archive.
      tags:
      - tag: component
        value: raw
    - uuid: d3033737855249668ed17ebf3282deda
      name: Get ASM disk groups
      type: ODBC
      key: 
        db.odbc.get[get_asm,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: SELECT name AS dgname FROM v$asm_diskgroup;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the ASM disk groups.
      tags:
      - tag: component
        value: raw
    - uuid: 934b64ac8ef341e59bf85cc80feed76d
      name: Get database
      type: ODBC
      key: 
        db.odbc.get[get_db,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: SELECT name as DBNAME, DECODE(CDB, 'YES', 'CDB', 'No-CDB') AS TYPE  FROM
        V$DATABASE;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the databases in the database management system (DBMS).
      tags:
      - tag: component
        value: raw
    - uuid: cdd341f47e7844319765693a0b35368f
      name: Get instance state
      type: ODBC
      key: 
        db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT
        INSTANCE_NAME,
        HOST_NAME,
        VERSION || '-' || EDITION AS VERSION,
        floor((SYSDATE - startup_time)*60*60*24) AS UPTIME,
        decode(status,'STARTED',1,'MOUNTED',2,'OPEN',3,'OPEN MIGRATE',4, 0) AS STATUS,
        decode(archiver,'STOPPED',1,'STARTED',2,'FAILED',3, 0) AS  ARCHIVER,
        decode(instance_role,'PRIMARY_INSTANCE',1,'SECONDARY_INSTANCE',2, 0) AS  INSTANCE_ROLE
        FROM v$instance;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the state of the current instance.
      tags:
      - tag: component
        value: raw
    - uuid: 2e249b9a72bb43cb8aa09fef24a9eadd
      name: Get PDB
      type: ODBC
      key: 
        db.odbc.get[get_pdb,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: SELECT name as DBNAME FROM V$PDBS;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the pluggable database (PDB) in DBMS.
      tags:
      - tag: component
        value: raw
    - uuid: 411cfc16c7bc4ec498b7bb3e6ba1c35e
      name: Get system metrics
      type: ODBC
      key: 
        db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 0;m0-59
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT 'SYS::' || METRIC_NAME AS METRIC, ROUND(VALUE,3) as VALUE
         FROM V$SYSMETRIC WHERE GROUP_ID = 2
        UNION
          SELECT 'SYSPARAM::' || INITCAP(NAME) AS METRIC, to_number(VALUE)
          FROM V$SYSTEM_PARAMETER WHERE NAME IN ('sessions', 'processes', 'db_files')
        UNION
         SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
        UNION
        SELECT 'SESSION::Lock rate' ,(cnt_block / cnt_all)* 100 pct
        FROM ( SELECT COUNT(*) cnt_block FROM v$session WHERE blocking_session IS NOT NULL), ( SELECT COUNT(*) cnt_all FROM v$session)
        UNION
          SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
        UNION
         SELECT 'SESSION::Total', COUNT(*) AS VALUE FROM V$SESSION
        UNION
        SELECT 'SESSION::Concurrency rate', NVL(ROUND(SUM(duty_act.cnt*100 / num_cores.val)), 0)
        FROM
        ( SELECT DECODE(session_state, 'ON CPU', 'CPU', wait_class) wait_class, ROUND(COUNT(*)/(60 * 15), 1) cnt
        FROM v$active_session_history sh
        WHERE sh.sample_time >= SYSDATE - 15 / 1440 AND DECODE(session_state, 'ON CPU', 'CPU', wait_class) IN('Concurrency')
        GROUP BY DECODE(session_state, 'ON CPU', 'CPU', wait_class)) duty_act,
        ( SELECT SUM(value) val FROM v$osstat WHERE stat_name = 'NUM_CPU_CORES') num_cores
        UNION
         SELECT 'PGA::' || INITCAP(NAME), VALUE FROM V$PGASTAT
        UNION
         SELECT 'FRA::Space Limit' AS METRIC, space_limit AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Space Used', space_used AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Space Reclaimable', space_reclaimable AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Number Of Files', number_of_files AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Usable Pct', DECODE(space_limit, 0, 0,(100-(100 *(space_used-space_reclaimable)/ space_limit))) AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Restore Point', COUNT(*) AS VALUE FROM V$RESTORE_POINT
        UNION
         SELECT 'PROC::Procnum', COUNT(*) FROM v$process
        UNION
         SELECT 'DATAFILE::Count', COUNT(*) FROM v$datafile
        UNION
         SELECT 'SGA::' || INITCAP(pool), SUM(bytes) FROM V$SGASTAT
         WHERE pool IN ( 'java pool', 'large pool' ) GROUP BY pool
        UNION
         SELECT 'SGA::Shared Pool', SUM(bytes) FROM V$SGASTAT
         WHERE pool = 'shared pool' AND name NOT IN ('library cache', 'dictionary cache', 'free memory', 'sql area')
        UNION
         SELECT 'SGA::' || INITCAP(name), bytes FROM V$SGASTAT
         WHERE pool IS NULL AND name IN ('log_buffer', 'fixed_sga')
        UNION
         SELECT 'SGA::Buffer_Cache', SUM(bytes) FROM V$SGASTAT
         WHERE pool IS NULL AND name IN ('buffer_cache', 'db_block_buffers')
        UNION
         SELECT 'REDO::Available', count(*) from v$log t where t.status in ('INACTIVE', 'UNUSED')
        UNION
         SELECT 'USER::Expire password', ROUND(DECODE(SIGN(NVL(u.expiry_date, SYSDATE + 999) - SYSDATE),-1, 0, NVL(u.expiry_date, SYSDATE + 999) - SYSDATE)) exp_passwd_days_before
        FROM dba_users u WHERE username = UPPER('{$ORACLE.USER}');
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the values of the system metrics.
      tags:
      - tag: component
        value: raw
    - uuid: df88c14482ed4147b162ae9a7e34e91f
      name: Get tablespace
      type: ODBC
      key: 
        db.odbc.get[get_tablespace,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT NVL(CON$NAME, 'DB') CON_NAME,
        TABLESPACE_NAME TABLESPACE,
        CONTENTS
        FROM CDB_TABLESPACES;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets tablespaces in DBMS.
      tags:
      - tag: component
        value: raw
    - uuid: 767d99c75c2841408e3afc5d110675b1
      name: Service's TCP port state
      key: net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}]
      delay: 30s
      history: 7d
      description: Checks the availability of Oracle on the TCP port.
      valuemap:
        name: Service state
      preprocessing:
      - type: DISCARD_UNCHANGED_HEARTBEAT
        parameters:
        - 10m
      tags:
      - tag: component
        value: health
      - tag: component
        value: network
    - uuid: d6018902889a4f1383c1098f1512b448
      name: Active parallel sessions
      type: DEPENDENT
      key: oracle.active_parallel_sessions
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active parallel sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Active Parallel Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 690b692894b14d1c9b7fcd26b4171687
      name: Active serial sessions
      type: DEPENDENT
      key: oracle.active_serial_sessions
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active serial sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Active Serial Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: e458e67a372b4235a701b674e19006d9
      name: Average active sessions
      type: DEPENDENT
      key: oracle.active_sessions
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The average number of active sessions at a point in time that are
        either working or waiting.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Average Active Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: b03530248a734825b32f3aa05be4080f
      name: Archiver state
      type: DEPENDENT
      key: oracle.archiver_state
      delay: '0'
      history: 7d
      description: The status of automatic archiving.
      valuemap:
        name: Oracle archiver state
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..ARCHIVER.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 2bdedfa61ab5496db5c28dbb7cb32572
      name: Buffer cache hit ratio
      type: DEPENDENT
      key: oracle.buffer_cache_hit_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio of buffer cache hits ((LogRead - PhyRead)/LogRead).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Buffer Cache Hit Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: eff58346cdbb4ccd89082210facd2c0d
      name: Global cache blocks corrupted
      type: DEPENDENT
      key: oracle.cache_blocks_corrupt
      delay: '0'
      history: 7d
      units: Rps
      description: The number of blocks that encountered corruption or checksum failure
        during the interconnect.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Global Cache Blocks Corrupted')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: afcde1822b8c4790a4c210d0e1d58601
      name: Global cache blocks lost
      type: DEPENDENT
      key: oracle.cache_blocks_lost
      delay: '0'
      history: 7d
      units: Rps
      description: The number of lost global cache blocks.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Global Cache Blocks Lost')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: ac2c032ecf494d17b129025c9a943735
      name: Cursor cache hit ratio
      type: DEPENDENT
      key: oracle.cursor_cache_hit_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio of cursor cache hits (CursorCacheHit/SoftParse).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Cursor Cache Hit Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 41f67951ee5b402c84f091eb119d7a3f
      name: Database CPU time ratio
      type: DEPENDENT
      key: oracle.database_cpu_time_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio calculated by dividing the total CPU (used by the database)
        by the Oracle time model statistic DB time.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Database CPU Time Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cpu
    - uuid: 28188729e2c34f49b419bb5932f3fd65
      name: Database wait time ratio
      type: DEPENDENT
      key: oracle.database_wait_time_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: Wait time - the time that the server process spends waiting for
        available shared resources to be released by other server processes such as
        latches, locks, data buffers, etc.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Database Wait Time Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: c869e354af2d4ffaabfbdc8d97f62648
      name: Datafiles count
      type: DEPENDENT
      key: oracle.db_files_count
      delay: '0'
      history: 7d
      description: The current number of datafiles.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='DATAFILE::Count')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: datafiles
    - uuid: 8149028471084fa79302a1899b2e9120
      name: Datafiles limit
      type: DEPENDENT
      key: oracle.db_files_limit
      delay: '0'
      history: 7d
      description: The maximum allowable number of datafiles.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYSPARAM::Db_Files')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: datafiles
    - uuid: 26883c7e8e034d4d82cdc521bcdbb6be
      name: Disk sort per second
      type: DEPENDENT
      key: oracle.disk_sorts
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of sorts going to disk per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Disk Sort Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 814a2cc0556e49889df446e3b3f72ab1
      name: Enqueue timeouts per second
      type: DEPENDENT
      key: oracle.enqueue_timeouts_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: Enqueue timeouts per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Enqueue Timeouts Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 884957eee82c43fe83607eb123a42e73
      name: FRA, Number of files
      type: DEPENDENT
      key: oracle.fra_number_of_files
      delay: '0'
      history: 7d
      description: The number of files in the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Number Of Files')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 99c1e341842a429dbada5eb1773a374e
      name: FRA, Number of restore points
      type: DEPENDENT
      key: oracle.fra_restore_point
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: Number of restore points in the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Restore Point')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 47c12085ee594e88a005f09bb9363920
      name: FRA, Space limit
      type: DEPENDENT
      key: oracle.fra_space_limit
      delay: '0'
      history: 7d
      units: B
      description: The maximum amount of disk space (in bytes) that the database can
        use for the Fast Recovery Area (FRA).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Space Limit')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: ce3765baf2664ee7a352b82d850604df
      name: FRA, Space reclaimable
      type: DEPENDENT
      key: oracle.fra_space_reclaimable
      delay: '0'
      history: 7d
      units: B
      description: The total amount of disk space (in bytes) that can be created by
        deleting obsolete, redundant, and other low-priority files from the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Space Reclaimable')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: d8c3d1eea54a47f1aac33e681c08b51b
      name: FRA, Used space
      type: DEPENDENT
      key: oracle.fra_space_used
      delay: '0'
      history: 7d
      units: B
      description: The amount of disk space (in bytes) used by FRA files created in
        the current and all the previous FRAs.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Space Used')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: abb9b5ebfee84908843b74e2272dabd5
      name: FRA, Usable space in %
      type: DEPENDENT
      key: oracle.fra_usable_pct
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: Percentage of space usable in the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Usable Pct')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 37f7366c9f2c49dc8e01416f562dc799
      name: GC CR block received per second
      type: DEPENDENT
      key: oracle.gc_cr_block_received_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The global cache (GC) and the consistent read (CR) block received
        per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::GC CR Block Received Per Second')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 3f5b30b660ed4ff6a2f9ddb940c4c84e
      name: Instance role
      type: DEPENDENT
      key: oracle.instance.role
      delay: '0'
      history: 7d
      description: Indicates whether the instance is an active instance or an inactive
        secondary instance.
      valuemap:
        name: Oracle instance role
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..INSTANCE_ROLE.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 253386f0777748d19af120f7795453dc
      name: Instance hostname
      type: DEPENDENT
      key: oracle.instance_hostname
      delay: '0'
      history: 7d
      value_type: CHAR
      trends: '0'
      description: The name of the host machine.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..HOST_NAME.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 266e8a6d57c048baabdbff8fc5dcafb9
        expression: last(/Oracle by ODBC ORA/oracle.instance_hostname,#1)<>last(/Oracle
          by ODBC ORA/oracle.instance_hostname,#2) and length(last(/Oracle by ODBC
          ORA/oracle.instance_hostname))>0
        name: Instance hostname has changed
        event_name: 'Instance hostname has changed (new hostname received: {ITEM.VALUE})'
        priority: INFO
        description: An Oracle Database instance hostname has changed. Acknowledge
          to close the problem manually.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: 2642bb94b9b64d68bb7b6e4ceb77ced4
      name: Instance name
      type: DEPENDENT
      key: oracle.instance_name
      delay: '0'
      history: 7d
      value_type: CHAR
      trends: '0'
      description: The name of the instance.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..INSTANCE_NAME.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 2daf895d660c48a3970797e22e3e279a
        expression: last(/Oracle by ODBC ORA/oracle.instance_name,#1)<>last(/Oracle
          by ODBC ORA/oracle.instance_name,#2) and length(last(/Oracle by ODBC ORA/oracle.instance_name))>0
        name: Instance name has changed
        event_name: 'Instance name has changed (new name received: {ITEM.VALUE})'
        priority: INFO
        description: An Oracle Database instance name has changed. Acknowledge to
          close the problem manually.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: 4e5e4a3993a64da395f4df5a36f023ba
      name: Instance status
      type: DEPENDENT
      key: oracle.instance_status
      delay: '0'
      history: 7d
      description: The status of the instance.
      valuemap:
        name: Oracle instance status
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..STATUS.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 4f84a2663b0f4b278446a389f92e4e59
      name: Library cache hit ratio
      type: DEPENDENT
      key: oracle.library_cache_hit_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio of library cache hits (Hits/Pins).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Library Cache Hit Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 28680f9132074cd8b0007dab3815064d
      name: Logons per second
      type: DEPENDENT
      key: oracle.logons_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of logon attempts.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Logons Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: a3b38025e9954af2819c82d450718681
      name: Long table scans per second
      type: DEPENDENT
      key: oracle.long_table_scans_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of long table scans per second. A table is considered
        long if it is not cached and if its high water mark is greater than five blocks.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Long Table Scans Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 6eb9e4b5ae454afea082edba6036b8fe
      name: Memory sorts ratio
      type: DEPENDENT
      key: oracle.memory_sorts_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The percentage of sorts (from `ORDER BY` clauses or index building)
        that are done to disk vs. in-memory.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Memory Sorts Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 8a0f9c2823d54198abfda10f3870c552
      name: PGA, Global memory bound
      type: DEPENDENT
      key: oracle.pga_global_bound
      delay: '0'
      history: 7d
      units: B
      description: The maximum size of a work area executed in automatic mode.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Global Memory Bound')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: 2dfae6c467e14d2d83c5f5e059e4ab5d
      name: PGA, Aggregate target parameter
      type: DEPENDENT
      key: oracle.pga_target
      delay: '0'
      history: 7d
      units: B
      description: The current value of the `PGA_AGGREGATE_TARGET` initialization
        parameter. If this parameter is not set, then its value is "0" and automatic
        management of the PGA memory is disabled.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Aggregate Pga Target Parameter')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: d9f953dbebd14a0f9b343368f368a579
      name: Physical reads per second
      type: DEPENDENT
      key: oracle.physical_reads_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: Reads per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Reads Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 13d0c934229d434a96a5c123e9eb3112
      name: Physical reads bytes per second
      type: DEPENDENT
      key: oracle.physical_read_bytes_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Bps
      description: Read bytes per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Read Bytes Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 22f98bae061b44fd816983bed59f42e3
      name: Physical writes per second
      type: DEPENDENT
      key: oracle.physical_writes_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: Writes per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Writes Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: c5396c8aec894f048ac5394d25cf3ff9
      name: Physical writes bytes per second
      type: DEPENDENT
      key: oracle.physical_write_bytes_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Bps
      description: Write bytes per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Write Bytes Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 99e0bd1fb96b4137ac93fcb50afde4c4
      name: Number of processes
      type: DEPENDENT
      key: oracle.processes_count
      delay: '0'
      history: 7d
      description: The current number of user processes.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PROC::Procnum')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: system
    - uuid: 37feaa33dc884ff6b95b18fdca6d9ffd
      name: Processes limit
      type: DEPENDENT
      key: oracle.processes_limit
      delay: '0'
      history: 7d
      description: The maximum number of user processes.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYSPARAM::Processes')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: system
    - uuid: 040e07f6d15448f693930985ce2557d4
      name: Redo logs available to switch
      type: DEPENDENT
      key: oracle.redo_logs_available
      delay: '0'
      history: 7d
      description: The number of inactive/unused redo logs available for log switching.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='REDO::Available')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 493a4f52f7a14477b41cf3afd487f1e1
        expression: max(/Oracle by ODBC ORA/oracle.redo_logs_available,5m) < {$ORACLE.REDO.MIN.WARN}
        name: Number of REDO logs available for switching is too low
        event_name: Number of REDO logs available for switching is too low (less {$ORACLE.REDO.MIN.WARN}
          for 5 min)
        priority: WARNING
        description: The number of inactive/unused redos available for log switching
          is low (risk of database downtime).
        tags:
        - tag: scope
          value: capacity
    - uuid: ad76fcce07e44367bc2d156f9f2b8b24
      name: Rows per sort
      type: DEPENDENT
      key: oracle.rows_per_sort
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The average number of rows per sort for all types of sorts performed.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Rows Per Sort')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: ffefb911af3f4bf0ba23f3d8ce7d31c5
      name: SQL service response time
      type: DEPENDENT
      key: oracle.service_response_time
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: s
      description: The Structured Query Language (SQL) service response time expressed
        in seconds.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::SQL Service Response Time')].VALUE.first()
      - type: MULTIPLIER
        parameters:
        - '0.01'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 0d34e48bd6e346d8944d7714d47d3b41
      name: Active background sessions
      type: DEPENDENT
      key: oracle.session_active_background
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active background sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Active Background')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: b4904df1ae6f424fa7323a0671bd9d22
      name: Active user sessions
      type: DEPENDENT
      key: oracle.session_active_user
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active user sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Active User')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 78af5680c22f4239afb10077d90e2c85
      name: Sessions concurrency
      type: DEPENDENT
      key: oracle.session_concurrency_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The percentage of concurrency. Concurrency is a database behavior
        when different transactions request to change the same resource. In the case
        of modifying data transactions, it sequentially temporarily blocks the right
        to change the data, and the rest of the transactions wait for access. When
        the access to a resource is locked for a long time, the concurrency grows
        (like the transaction queue), often leaving an extremely negative impact on
        performance. A high contention value does not indicate the root cause of the
        problem, but is a signal to search for it.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Concurrency rate')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
      triggers:
      - uuid: 25e86a388977414186c4842bc6eb47ff
        expression: min(/Oracle by ODBC ORA/oracle.session_concurrency_rate,5m) >
          {$ORACLE.CONCURRENCY.MAX.WARN}
        name: Too high database concurrency
        event_name: Too high database concurrency (over {$ORACLE.CONCURRENCY.MAX.WARN}%
          for 5 min)
        priority: WARNING
        description: The concurrency rate exceeds `{$ORACLE.CONCURRENCY.MAX.WARN}`%.
          A high contention value does not indicate the root cause of the problem,
          but is a signal to review resource consumption (determine the "heaviest"
          queries in the database, trace sessions, etc.) This will help find the root
          cause and possible optimization points both in database configuration and
          the logic of building queries.
        tags:
        - tag: scope
          value: performance
    - uuid: ce4f98196c7c415ab4b1c53ae80ea2c7
      name: Session count
      type: DEPENDENT
      key: oracle.session_count
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The session count.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Total')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: ad9741ba01fb4408b0056442cf850465
      name: Inactive user sessions
      type: DEPENDENT
      key: oracle.session_inactive_user
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of inactive user sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Inactive User')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 642234457d0145cb84ddb6816b0274ab
      name: Sessions limit
      type: DEPENDENT
      key: oracle.session_limit
      delay: '0'
      history: 7d
      description: The user and system sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYSPARAM::Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 84f328c6f0da43c7b970ed86a6db0de2
      name: Sessions lock rate
      type: DEPENDENT
      key: oracle.session_lock_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The percentage of locked sessions. Locks are mechanisms that prevent
        destructive interaction between transactions accessing the same resource -
        either user objects, such as tables and rows or system objects not visible
        to users, such as shared data structures in memory and data dictionary rows.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Lock rate')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
      triggers:
      - uuid: d26c68decc5f4431973a20274f77f61d
        expression: min(/Oracle by ODBC ORA/oracle.session_lock_rate,5m) > {$ORACLE.SESSIONS.LOCK.MAX.WARN}
        name: Too many locked sessions
        event_name: Too many locked sessions (over {$ORACLE.SESSIONS.LOCK.MAX.WARN}%
          for 5 min)
        priority: WARNING
        description: The number of locked sessions exceeds `{$ORACLE.SESSIONS.LOCK.MAX.WARN}`%
          of the running sessions.
        tags:
        - tag: scope
          value: performance
    - uuid: fa9e84c1c091499da944a77f2dc75715
      name: Sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s
      type: DEPENDENT
      key: oracle.session_long_time_locked
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The count of the prolongedly locked sessions. (You can change the
        duration of the maximum session lock in seconds for a query using the `{$ORACLE.SESSION.LOCK.MAX.TIME}`
        macro. Default = 600 s).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Long time locked')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
      triggers:
      - uuid: 61a86b2d27c64b12a07ffb360a8534a9
        expression: min(/Oracle by ODBC ORA/oracle.session_long_time_locked,5m) >
          {$ORACLE.SESSION.LONG.LOCK.MAX.WARN}
        name: Too many sessions locked
        event_name: Too many sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s
          (over {$ORACLE.SESSION.LONG.LOCK.MAX.WARN} for 5 min)
        priority: WARNING
        description: The number of locked sessions exceeding `{$ORACLE.SESSION.LOCK.MAX.TIME}`
          seconds is too high. Long-term locks can negatively affect the database
          performance. Therefore, if they are detected, you should first find the
          most difficult queries from the database point of view and then analyze
          possible resource leaks.
        tags:
        - tag: scope
          value: performance
    - uuid: c13ba05a56264711a1c74c877cbab20f
      name: SGA, buffer cache
      type: DEPENDENT
      key: oracle.sga_buffer_cache
      delay: '0'
      history: 7d
      units: B
      description: The size of standard block cache.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Buffer_Cache')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
      - tag: component
        value: sga
    - uuid: d80be4b953e4463cacad565cb0164d87
      name: SGA, fixed
      type: DEPENDENT
      key: oracle.sga_fixed
      delay: '0'
      history: 7d
      units: B
      description: The fixed System Global Area (SGA) is an internal housekeeping
        area.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Fixed_Sga')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 524eaa33fea84da5a2df96009a511b08
      name: SGA, java pool
      type: DEPENDENT
      key: oracle.sga_java_pool
      delay: '0'
      history: 7d
      units: B
      description: The memory is allocated from the Java pool.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Java Pool')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 033c4bbd11984effa851acde4e6d0d0f
      name: SGA, large pool
      type: DEPENDENT
      key: oracle.sga_large_pool
      delay: '0'
      history: 7d
      units: B
      description: The memory is allocated from a large pool.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Large Pool')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 8183e408258349d599009d1feaa228de
      name: SGA, log buffer
      type: DEPENDENT
      key: oracle.sga_log_buffer
      delay: '0'
      history: 7d
      units: B
      description: The number of bytes allocated for the redo log buffer.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Log_Buffer')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 8c4d532500d840cf927263492b21ec37
      name: SGA, shared pool
      type: DEPENDENT
      key: oracle.sga_shared_pool
      delay: '0'
      history: 7d
      units: B
      description: The memory is allocated from a shared pool.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Shared Pool')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 1eedd5d711ed42c083111de150c45ed2
      name: Shared pool free %
      type: DEPENDENT
      key: oracle.shared_pool_free
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: Free memory of a shared pool expressed in %.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Shared Pool Free %')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      triggers:
      - uuid: 37e32aafe6844c12a3d4486c177506d2
        expression: max(/Oracle by ODBC ORA/oracle.shared_pool_free,5m)<{$ORACLE.SHARED.FREE.MIN.WARN}
        name: Shared pool free is too low
        event_name: Shared pool free is too low (less {$ORACLE.SHARED.FREE.MIN.WARN}%
          for 5m)
        priority: WARNING
        description: The free memory percent of the shared pool has been less than
          `{$ORACLE.SHARED.FREE.MIN.WARN}`% for the last 5 minutes.
        tags:
        - tag: scope
          value: capacity
    - uuid: 687e10ae361e47389507193b3a97e1a4
      name: Total sorts per user call
      type: DEPENDENT
      key: oracle.sorts_per_user_call
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The total sorts per user call.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Total Sorts Per User Call')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 119642908bf24d96b87044accd27e5ae
      name: Temp space used
      type: DEPENDENT
      key: oracle.temp_space_used
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: B
      description: Used temporary space.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Temp Space Used')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 8d3e8c5b6430431cada310b10777b4b6
      name: PGA, Total allocated
      type: DEPENDENT
      key: oracle.total_pga_allocated
      delay: '0'
      history: 7d
      units: B
      description: The current amount of the PGA memory allocated by the instance.
        The Oracle Database attempts to keep this number below the value of the `PGA_AGGREGATE_TARGET`
        initialization parameter. However, it is possible for the PGA allocated to
        exceed that value by a small percentage and for a short period of time when
        the work area workload is increasing very rapidly or when `PGA_AGGREGATE_TARGET`
        is set to a small value.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Total Pga Allocated')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: bec838a67aaf4bd8a0c99d3d4d6cecf1
      name: PGA, Total freeable
      type: DEPENDENT
      key: oracle.total_pga_freeable
      delay: '0'
      history: 7d
      units: B
      description: The number of bytes of the PGA memory in all processes that could
        be freed back to the OS.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Total Freeable Pga Memory')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: 83e759969ec84a32bd15cedaa7a18125
      name: PGA, Total inuse
      type: DEPENDENT
      key: oracle.total_pga_used
      delay: '0'
      history: 7d
      units: B
      description: The amount of Program Global Area (PGA) memory currently consumed
        by work areas. This number can be used to determine how much memory is consumed
        by other consumers of the PGA memory (for example, PL/SQL or Java).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Total Pga Inuse')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: 9222d7689db54c749efcabad902f0141
      name: Uptime
      type: DEPENDENT
      key: oracle.uptime
      delay: '0'
      history: 7d
      trends: '0'
      units: s
      description: The Oracle instance uptime expressed in seconds.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..UPTIME.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: eb6b67a0141546a6b25814faa62d824e
        expression: nodata(/Oracle by ODBC ORA/oracle.uptime,5m)=1
        name: Failed to fetch info data
        event_name: Failed to fetch info data (or no data for 5m)
        priority: WARNING
        description: Zabbix has not received any data for the items for the last 5
          minutes. The database might be unavailable for connecting.
        dependencies:
        - name: Port {$ORACLE.PORT} is unavailable
          expression: max(/Oracle by ODBC ORA/net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}],#3)=0  and
            max(/Oracle by ODBC ORA/proc.num[,,,"tnslsnr LISTENER"],#3)>0
        tags:
        - tag: scope
          value: availability
      - uuid: d365d50732f04e3baace3e81e0e5258e
        expression: last(/Oracle by ODBC ORA/oracle.uptime)<10m
        name: Host has been restarted
        event_name: '{HOST.NAME} has been restarted (uptime < 10m)'
        priority: INFO
        description: Uptime is less than 10 minutes.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: 1fa7d699197d4b4c804a95723682bc52
      name: User '{$ORACLE.USER}' expire password
      type: DEPENDENT
      key: oracle.user_expire_password
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: days
      description: The number of days before the Zabbix account password expires.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='USER::Expire password')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 3aaea2d55e1949af890c428e75932d47
        expression: last(/Oracle by ODBC ORA/oracle.user_expire_password)  < {$ORACLE.EXPIRE.PASSWORD.MIN.WARN}
        name: Zabbix account will expire soon
        event_name: Zabbix account will expire soon (under {$ORACLE.EXPIRE.PASSWORD.MIN.WARN}
          days)
        priority: WARNING
        description: The password for the Zabbix user in the database expires soon.
        tags:
        - tag: scope
          value: notice
    - uuid: 4f41a7b7937e4a409c891e208a8ac20f
      name: User rollbacks per second
      type: DEPENDENT
      key: oracle.user_rollbacks_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of times that users manually issued the `ROLLBACK` statement
        or an error occurred during the users' transactions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::User Rollbacks Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: b669634761b445b2bb73272712654630
      name: Version
      type: DEPENDENT
      key: oracle.version
      delay: '0'
      history: 7d
      value_type: CHAR
      trends: '0'
      description: The Oracle Server version.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..VERSION.first()
      - type: DISCARD_UNCHANGED_HEARTBEAT
        parameters:
        - 1d
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 3420fbc96e994d4fae9ea14184ec69ed
        expression: last(/Oracle by ODBC ORA/oracle.version,#1)<>last(/Oracle by ODBC
          ORA/oracle.version,#2) and length(last(/Oracle by ODBC ORA/oracle.version))>0
        name: Version has changed
        event_name: 'Version has changed (new version value received: {ITEM.VALUE})'
        priority: INFO
        description: The Oracle Database version has changed. Acknowledge to close
          the problem manually.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: cc62b951461c4ad693b029c1d60ff607
      name: Number of LISTENER processes
      key: proc.num[,,,"tnslsnr LISTENER"]
      delay: 30s
      history: 7d
      description: The number of running listener processes.
      preprocessing:
      - type: DISCARD_UNCHANGED_HEARTBEAT
        parameters:
        - 10m
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: aeb97c5e2e354346bd40acd835763a8e
        expression: max(/Oracle by ODBC ORA/proc.num[,,,"tnslsnr LISTENER"],#3)=0
        name: LISTENER process is not running
        priority: DISASTER
        description: The Oracle listener process is not running.
        tags:
        - tag: scope
          value: availability
    discovery_rules:
    - uuid: 8db3b504b78844ebaff5cd74ef1e425b
      name: Archive log discovery
      type: DEPENDENT
      key: oracle.archivelog.discovery
      delay: '0'
      description: Used for the discovery of the log archive.
      item_prototypes:
      - uuid: f9a7ea853be94e75b6ab9389f9f8fea2
        name: "Archivelog '{#DEST_NAME}': Get archive log info"
        type: ODBC
        key: 
          db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        delay: 5m
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT
          d.dest_name, DECODE (d.status, 'VALID',3, 'DEFERRED', 2, 'ERROR', 1, 0) AS status,
          d.log_sequence,
          d.error
          FROM v$archive_dest d , v$database db
          WHERE d.dest_name = '{#DEST_NAME}' AND d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the archive log statistics.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: archive-log
        - tag: component
          value: raw
      - uuid: 14f6dc5788954402999d9792d95e2623
        name: "Archivelog '{#DEST_NAME}': Error"
        type: DEPENDENT
        key: oracle.archivelog_error["{#DEST_NAME}"]
        delay: '0'
        history: 7d
        value_type: TEXT
        trends: '0'
        description: Displays the error message.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.ERROR
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 1h
        master_item:
          key: 
            db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: archive-log
        - tag: destination
          value: '{#DEST_NAME}'
      - uuid: be2a04d95b0b490e8b19f28893847970
        name: "Archivelog '{#DEST_NAME}': Last sequence"
        type: DEPENDENT
        key: oracle.archivelog_log_sequence["{#DEST_NAME}"]
        delay: '0'
        history: 7d
        description: Identifies the sequence number of the last archived redo log
          to be archived.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.LOG_SEQUENCE
        master_item:
          key: 
            db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: archive-log
        - tag: destination
          value: '{#DEST_NAME}'
      - uuid: 8fb4e8f981e141d28d83fde4440d3d4f
        name: "Archivelog '{#DEST_NAME}': Status"
        type: DEPENDENT
        key: oracle.archivelog_log_status["{#DEST_NAME}"]
        delay: '0'
        history: 7d
        description: |
          Identifies the current status of the destination where:
          1 - VALID;
          2 - DEFERRED;
          3 - ERROR;
          0 - UNKNOWN.
        valuemap:
          name: Oracle Archivelog status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.STATUS
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 1h
        master_item:
          key: 
            db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: archive-log
        - tag: destination
          value: '{#DEST_NAME}'
        trigger_prototypes:
        - uuid: ca05268181f34b35aced0048b8287ec6
          expression: last(/Oracle by ODBC ORA/oracle.archivelog_log_status["{#DEST_NAME}"])<2
          name: "Archivelog '{#DEST_NAME}': Log Archive is not valid"
          priority: HIGH
          description: |
            The trigger will launch if the archive log destination is not in one of these states:
            2 - DEFERRED;
            3 - VALID.
          tags:
          - tag: scope
            value: availability
      master_item:
        key: 
          db.odbc.get[get_archivelog,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DEST_NAME}'
        path: $.DEST_NAME
    - uuid: 25aa2392f8f64f93a1b4406e4d44970f
      name: ASM disk groups discovery
      type: DEPENDENT
      key: oracle.asm.discovery
      delay: '0'
      description: Used for discovering the ASM disk groups.
      item_prototypes:
      - uuid: 9b6cf4e350034c4d9c2ece51f8f26e04
        name: "ASM '{#DGNAME}': Get ASM stats"
        type: ODBC
        key: 
          db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT
          name AS dgname,
          ROUND(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)*1024*1024) AS size_byte,
          ROUND(usable_file_mb*1024*1024 ) AS free_size_byte,
          ROUND(100-(usable_file_mb /(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)))* 100, 2) AS used_percent
          FROM v$asm_diskgroup
          WHERE name = '{#DGNAME}';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the ASM disk group statistics.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: asm
        - tag: component
          value: raw
      - uuid: 3f82693ee8c74ca499e6c4d0de1e6632
        name: "ASM '{#DGNAME}': Free size"
        type: DEPENDENT
        key: oracle.asm_free_size["{#DGNAME}"]
        delay: '0'
        history: 7d
        units: B
        description: The free size of the ASM disk group.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FREE_SIZE_BYTE
        master_item:
          key: 
            db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: asm
        - tag: disk-group
          value: '{#DGNAME}'
      - uuid: d809905ad3764e4792bf5ebe39468d35
        name: "ASM '{#DGNAME}': Total size"
        type: DEPENDENT
        key: oracle.asm_total_size["{#DGNAME}"]
        delay: '0'
        history: 7d
        units: B
        description: The total size of the ASM disk group.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.SIZE_BYTE
        master_item:
          key: 
            db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: asm
        - tag: disk-group
          value: '{#DGNAME}'
      - uuid: 6b44370e0dbf47a681c8223bb55799de
        name: "ASM '{#DGNAME}': Used size, percent"
        type: DEPENDENT
        key: oracle.asm_used_pct["{#DGNAME}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Usage of the ASM disk group expressed in %.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_PERCENT
        master_item:
          key: 
            db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: asm
        - tag: disk-group
          value: '{#DGNAME}'
        trigger_prototypes:
        - uuid: db932a26752e42ee8818a0bf20166c86
          expression: min(/Oracle by ODBC ORA/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}
          name: "ASM '{#DGNAME}': Disk group usage is too high"
          event_name: "ASM '{#DGNAME}': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.HIGH}%
            for 5m)"
          priority: HIGH
          description: The usage of the ASM disk group expressed in % exceeds `{$ORACLE.ASM.USED.PCT.MAX.WARN}`.
          tags:
          - tag: scope
            value: capacity
        - uuid: 33fe04992a5245e1b47e2b4907fed4bb
          expression: min(/Oracle by ODBC ORA/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.WARN}
          name: "ASM '{#DGNAME}': Disk group usage is too high"
          event_name: "ASM '{#DGNAME}': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.WARN}%
            for 5m)"
          priority: WARNING
          description: The usage of the ASM disk group expressed in % exceeds `{$ORACLE.ASM.USED.PCT.MAX.WARN}`.
          dependencies:
          - name: "ASM '{#DGNAME}': Disk group usage is too high"
            expression: min(/Oracle by ODBC ORA/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      graph_prototypes:
      - uuid: 06426a93d6a14b4b80dfaa8440c8ed35
        name: "ASM '{#DGNAME}': ASM disk group '{#DGNAME}'"
        graph_items:
        - color: 199C0D
          item:
            host: Oracle by ODBC ORA
            key: oracle.asm_free_size["{#DGNAME}"]
        - sortorder: '1'
          color: F63100
          item:
            host: Oracle by ODBC ORA
            key: oracle.asm_total_size["{#DGNAME}"]
      master_item:
        key: 
          db.odbc.get[get_asm,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DGNAME}'
        path: $.DGNAME
    - uuid: a36b9d3eb79f4796b7a5cdde59683084
      name: Database discovery
      type: DEPENDENT
      key: oracle.db.discovery
      delay: '0'
      filter:
        evaltype: AND
        conditions:
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.MATCHES}'
          formulaid: A
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: B
      description: Used for database discovery.
      item_prototypes:
      - uuid: 0a4212b02f4341809ec67cbabb497723
        name: "Oracle Database '{#DBNAME}': Get CDB and No-CDB info"
        type: ODBC
        key: 
          db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT name as DBNAME,
          DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode,
          DECODE(database_role, 'SNAPSHOT STANDBY', 1, 'LOGICAL STANDBY', 2, 'PHYSICAL STANDBY', 3, 'PRIMARY', 4, 'FAR SYNC', 5, 0) AS ROLE,
          DECODE(force_logging, 'YES',1,'NO',0,0) AS force_logging,
          DECODE(log_mode, 'MANUAL',2 ,'ARCHIVELOG',1,'NOARCHIVELOG',0,0) AS log_mode
          FROM v$database
          WHERE name = '{#DBNAME}';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the information about the CDB and non-CDB database on an
          instance.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: cdb
        - tag: component
          value: raw
      - uuid: 4e263728edc74ce48fb641749029a54c
        name: "Oracle Database '{#DBNAME}': Force logging"
        type: DEPENDENT
        key: oracle.db_force_logging["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: Indicates whether the database is under force logging mode (`YES`/`NO`).
        valuemap:
          name: Oracle force log status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FORCE_LOGGING
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
      - uuid: 68cf0745b13342e385a97458b7048b89
        name: "Oracle Database '{#DBNAME}': Log mode"
        type: DEPENDENT
        key: oracle.db_log_mode["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          The archive log mode where:
          0 - NOARCHIVELOG;
          1 - ARCHIVELOG;
          2 - MANUAL.
        valuemap:
          name: Oracle log mode
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.LOG_MODE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
      - uuid: ab4f8011a4354dd69eb6d3bd18a4ec7d
        name: "Oracle Database '{#DBNAME}': Open status"
        type: DEPENDENT
        key: oracle.db_open_mode["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          1 - MOUNTED;
          2 - READ WRITE;
          3 - READ ONLY;
          4 - READ ONLY WITH APPLY (a physical standby database is open in real-time query mode).
        valuemap:
          name: Oracle DB open status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.OPEN_MODE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
        trigger_prototypes:
        - uuid: 404add0105e043d28480700c440be25a
          expression: last(/Oracle by ODBC ORA/oracle.db_open_mode["{#DBNAME}"],#1)<>last(/Oracle
            by ODBC ORA/oracle.db_open_mode["{#DBNAME}"],#2)
          name: "Oracle Database '{#DBNAME}': Open status has changed"
          event_name: "Oracle Database '{#DBNAME}': Open status has changed (new value
            received: {ITEM.VALUE})"
          priority: INFO
          description: The Oracle Database open status has changed. Acknowledge to
            close the problem manually.
          manual_close: YES
          dependencies:
          - name: "Oracle Database '{#DBNAME}': Open status in mount mode"
            expression: last(/Oracle by ODBC ORA/oracle.db_open_mode["{#DBNAME}"])=1
          tags:
          - tag: scope
            value: notice
        - uuid: 7f2b7b18f64f42e9a82d8dc0ffdd3ad9
          expression: last(/Oracle by ODBC ORA/oracle.db_open_mode["{#DBNAME}"])=1
          name: "Oracle Database '{#DBNAME}': Open status in mount mode"
          priority: WARNING
          description: The Oracle Database is in a mounted state.
          tags:
          - tag: scope
            value: notice
      - uuid: 953d19d26ef5441cb3f2b5883baec1ef
        name: "Oracle Database '{#DBNAME}': Role"
        type: DEPENDENT
        key: oracle.db_role["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          The current role of the database where:
          1 - SNAPSHOT STANDBY;
          2 - LOGICAL STANDBY;
          3 - PHYSICAL STANDBY;
          4 - PRIMARY;
          5 - FAR SYNC.
        valuemap:
          name: Oracle DB role
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.ROLE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
        trigger_prototypes:
        - uuid: e8ab6e37dcd64416bcec55e2a94c537b
          expression: last(/Oracle by ODBC ORA/oracle.db_role["{#DBNAME}"],#1)<>last(/Oracle
            by ODBC ORA/oracle.db_role["{#DBNAME}"],#2)
          name: "Oracle Database '{#DBNAME}': Role has changed"
          event_name: "Oracle Database '{#DBNAME}': Role has changed (new value received:
            {ITEM.VALUE})"
          priority: INFO
          description: The Oracle Database role has changed. Acknowledge to close
            the problem manually.
          manual_close: YES
          tags:
          - tag: scope
            value: notice
      trigger_prototypes:
      - uuid: c6672c76bc4c4091b487df9bc186e091
        expression: last(/Oracle by ODBC ORA/oracle.db_force_logging["{#DBNAME}"])
          = 0 and last(/Oracle by ODBC ORA/oracle.db_log_mode["{#DBNAME}"]) = 1
        name: "Oracle Database '{#DBNAME}': Force logging is deactivated for DB with
          active Archivelog"
        priority: WARNING
        description: Force logging mode is a very important metric for databases in
          `ARCHIVELOG`. This feature allows to forcibly write all the transactions
          to the redo log.
        tags:
        - tag: scope
          value: performance
      master_item:
        key: 
          db.odbc.get[get_db,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DBNAME}'
        path: $.DBNAME
      - lld_macro: '{#TYPE}'
        path: $.TYPE
    - uuid: a1ca11110391495fac74fc2483a07b54
      name: PDB discovery
      type: DEPENDENT
      key: oracle.pdb.discovery
      delay: '0'
      filter:
        evaltype: AND
        conditions:
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.MATCHES}'
          formulaid: A
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: B
      description: Used for the discovery of the pluggable database (PDB).
      item_prototypes:
      - uuid: 715895c65e55412c936109dcac020d0b
        name: "Oracle Database '{#DBNAME}': Get PDB info"
        type: ODBC
        key: 
          db.odbc.get[get_pdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT
          name as DBNAME,
          DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode
          FROM v$pdbs
          WHERE name = '{#DBNAME}';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the information about the PDB database on an instance.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: pdb
        - tag: component
          value: raw
      - uuid: 2d66d807126347e294fea9cfe0a66af3
        name: "Oracle Database '{#DBNAME}': Open status"
        type: DEPENDENT
        key: oracle.pdb_open_mode["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          1 - MOUNTED;
          2 - READ WRITE;
          3 - READ ONLY;
          4 - READ ONLY WITH APPLY (a physical standby database is open in real-time query mode).
        valuemap:
          name: Oracle DB open status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.OPEN_MODE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_pdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: pdb
        trigger_prototypes:
        - uuid: 7f7be74a7d044970b3ce2f1ea7657f5e
          expression: last(/Oracle by ODBC ORA/oracle.pdb_open_mode["{#DBNAME}"],#1)<>last(/Oracle
            by ODBC ORA/oracle.pdb_open_mode["{#DBNAME}"],#2)
          name: "Oracle Database '{#DBNAME}': Open status has changed"
          event_name: "Oracle Database '{#DBNAME}': Open status has changed (new value
            received: {ITEM.VALUE})"
          priority: INFO
          description: The Oracle Database open status has changed. Acknowledge to
            close the problem manually.
          manual_close: YES
          tags:
          - tag: scope
            value: notice
        - uuid: 20776c7fd0b24ae5aabe55915d1c58f6
          expression: last(/Oracle by ODBC ORA/oracle.pdb_open_mode["{#DBNAME}"])=1
          name: "Oracle Database '{#DBNAME}': Open status in mount mode"
          priority: WARNING
          description: The Oracle Database is in a mounted state.
          tags:
          - tag: scope
            value: notice
      master_item:
        key: 
          db.odbc.get[get_pdb,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DBNAME}'
        path: $.DBNAME
    - uuid: 1f43842cd6c44319af35877e9c87bc87
      name: Tablespace discovery
      type: DEPENDENT
      key: oracle.tablespace.discovery
      delay: '0'
      filter:
        evaltype: AND
        conditions:
        - macro: '{#CON_NAME}'
          value: '{$ORACLE.TABLESPACE.CONTAINER.MATCHES}'
          formulaid: A
        - macro: '{#CON_NAME}'
          value: '{$ORACLE.TABLESPACE.CONTAINER.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: B
        - macro: '{#TABLESPACE}'
          value: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
          formulaid: C
        - macro: '{#TABLESPACE}'
          value: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: D
      description: Used for the discovery of tablespaces in DBMS.
      item_prototypes:
      - uuid: b9417e3f2b184e02ab0c1c93b5369aaf
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Get tablespaces stats"
        type: ODBC
        key: 
          db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT df.CON_NAME,
                 df.TABLESPACE_NAME                  AS TABLESPACE,
                 df.CONTENTS                         AS TYPE,
                 NVL(SUM(df.BYTES), 0)               AS FILE_BYTES,
                 NVL(SUM(df.MAX_BYTES), 0)           AS MAX_BYTES,
                 NVL(SUM(f.FREE), 0)                 AS FREE_BYTES,
                 NVL(SUM(df.BYTES) - SUM(f.FREE), 0) AS USED_BYTES,
                 ROUND(CASE SUM(df.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE (SUM(df.BYTES) / SUM(df.MAX_BYTES) * 100)
                           END, 2)                   AS USED_PCT_MAX,
                 ROUND(CASE SUM(df.BYTES)
                           WHEN 0 THEN 0
                           ELSE (NVL(SUM(df.BYTES) - SUM(f.FREE), 0)) / SUM(df.BYTES) * 100
                           END, 2)                   AS USED_FILE_PCT,
                 ROUND(CASE SUM(df.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE NVL(SUM(df.BYTES) - SUM(f.FREE), 0) / SUM(df.MAX_BYTES) * 100
                           END, 2)                   AS USED_FROM_MAX_PCT,
                 CASE df.STATUS
                     WHEN 'ONLINE' THEN 1
                     WHEN 'OFFLINE' THEN 2
                     WHEN 'READ ONLY' THEN 3
                     ELSE 0
                     END                             AS STATUS
          FROM (SELECT ct.CON$NAME                              AS CON_NAME,
                       cdf.FILE_ID,
                       ct.CONTENTS,
                       ct.STATUS,
                       cdf.FILE_NAME,
                       cdf.TABLESPACE_NAME,
                       TRUNC(cdf.BYTES)                         AS BYTES,
                       TRUNC(GREATEST(cdf.BYTES, cdf.MAXBYTES)) AS MAX_BYTES
                FROM CDB_DATA_FILES cdf,
                     CDB_TABLESPACES ct
                WHERE cdf.TABLESPACE_NAME = ct.TABLESPACE_NAME
                  AND cdf.CON_ID = ct.CON_ID
                  AND ((ct.CON$NAME = '{#CON_NAME}') or (ct.CON$NAME is null and ct.CON_ID = 0))
                  AND cdf.TABLESPACE_NAME = '{#TABLESPACE}'
                  AND ct.CONTENTS = '{#CONTENTS}') df,
               (SELECT TRUNC(SUM(BYTES)) AS FREE,
                       FILE_ID
                FROM CDB_FREE_SPACE
                GROUP BY FILE_ID) f
          WHERE df.FILE_ID = f.FILE_ID (+)
          GROUP BY df.CON_NAME,
                   df.TABLESPACE_NAME,
                   df.CONTENTS,
                   df.STATUS
          UNION ALL
          SELECT Y.CON_NAME,
                 Y.NAME                                   AS TABLESPACE,
                 Y.CONTENTS                               AS TYPE,
                 NVL(SUM(Y.BYTES), 0)                     AS FILE_BYTES,
                 NVL(SUM(Y.MAX_BYTES), 0)                 AS MAX_BYTES,
                 NVL(MAX(NVL(Y.FREE_BYTES, 0)), 0)        AS FREE_BYTES,
                 NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0) AS USED_BYTES,
                 ROUND(CASE SUM(Y.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE (SUM(Y.BYTES) / SUM(Y.MAX_BYTES) * 100)
                           END, 2)                                    AS USED_PCT_MAX,
                 ROUND(CASE SUM(Y.BYTES)
                           WHEN 0 THEN 0
                           ELSE (NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0)) / SUM(Y.BYTES) * 100
                           END, 2)                                    AS USED_FILE_PCT,
                 ROUND(CASE SUM(Y.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE (NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0)) / SUM(Y.MAX_BYTES) * 100
                           END, 2)                                    AS USED_FROM_MAX_PCT,
                 CASE Y.STATUS
                     WHEN 'ONLINE' THEN 1
                     WHEN 'OFFLINE' THEN 2
                     WHEN 'READ ONLY' THEN 3
                     ELSE 0
                     END                                  AS STATUS
          FROM (SELECT ct.CON$NAME                  AS CON_NAME,
                       ctf.TABLESPACE_NAME          AS NAME,
                       ct.CONTENTS,
                       ctf.STATUS                   AS STATUS,
                       ctf.BYTES                    AS BYTES,
                       (SELECT ((f.TOTAL_BLOCKS - s.TOT_USED_BLOCKS) * vp.VALUE)
                        FROM (SELECT CON_ID,
                                     TABLESPACE_NAME,
                                     SUM(USED_BLOCKS) TOT_USED_BLOCKS
                              FROM V$SORT_SEGMENT
                              WHERE TABLESPACE_NAME != 'DUMMY'
                              GROUP BY CON_ID,
                                       TABLESPACE_NAME) s,
                             (SELECT CON_ID,
                                     TABLESPACE_NAME,
                                     SUM(BLOCKS) TOTAL_BLOCKS
                              FROM CDB_TEMP_FILES
                              WHERE TABLESPACE_NAME != 'DUMMY'
                              GROUP BY CON_ID,
                                       TABLESPACE_NAME) f,
                             (SELECT VALUE
                              FROM V$PARAMETER
                              WHERE NAME = 'db_block_size') vp
                        WHERE f.TABLESPACE_NAME = s.TABLESPACE_NAME
                          AND f.TABLESPACE_NAME = ctf.TABLESPACE_NAME
                          AND f.CON_ID = s.CON_ID
                          AND f.CON_ID = ct.CON_ID) AS FREE_BYTES,
                       CASE
                           WHEN ctf.MAXBYTES = 0 THEN ctf.BYTES
                           ELSE ctf.MAXBYTES
                           END                      AS MAX_BYTES
                FROM CDB_TEMP_FILES ctf,
                     CDB_TABLESPACES ct
                WHERE ctf.TABLESPACE_NAME = ct.TABLESPACE_NAME
                  AND ctf.CON_ID = ct.CON_ID
                  AND ((ct.CON$NAME = '{#CON_NAME}') or (ct.CON$NAME is null and ct.CON_ID = 0))
                  AND ctf.TABLESPACE_NAME = '{#TABLESPACE}'
                  AND ct.CONTENTS = '{#CONTENTS}') Y
          GROUP BY Y.CON_NAME,
                   Y.NAME,
                   Y.CONTENTS,
                   Y.STATUS;
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the statistics of the tablespace.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: raw
        - tag: component
          value: tablespaces
      - uuid: 5171bfd222294b91a0a6a5a4c217e5fd
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace allocated, bytes"
        type: DEPENDENT
        key: oracle.tbs_alloc_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: Currently allocated bytes for the tablespace (sum of the current
          size of datafiles).
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FILE_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: 306e30a13d0341cb82b209e14f36aced
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace free, bytes"
        type: DEPENDENT
        key: oracle.tbs_free_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: Free bytes of the allocated space.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FREE_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: d27eaf95e2664804ada183ced52efa4a
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace MAX size, bytes"
        type: DEPENDENT
        key: oracle.tbs_max_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: The maximum size of the tablespace.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.MAX_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: e8f4b55a128d41a08b68aee17602b560
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Open status"
        type: DEPENDENT
        key: oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        description: |
          The tablespace status where:
          1 - ONLINE;
          2 - OFFLINE;
          3 - READ ONLY.
        valuemap:
          name: Oracle tablespace status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.STATUS
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: 128d74f178564bf08112f54ba2fb2dae
          expression: last(/Oracle by ODBC ORA/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"])=2
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace is OFFLINE"
          priority: WARNING
          description: The tablespace is in the offline state.
          tags:
          - tag: scope
            value: availability
        - uuid: d80318690aa24ab8a19bc93a958fc4cd
          expression: last(/Oracle by ODBC ORA/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"],#1)<>last(/Oracle
            by ODBC ORA/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"],#2)
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace status has changed"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace status
            has changed (new value received: {ITEM.VALUE})"
          priority: INFO
          description: Oracle tablespace status has changed. Acknowledge to close
            the problem manually.
          manual_close: YES
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace is OFFLINE"
            expression: last(/Oracle by ODBC ORA/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"])=2
          tags:
          - tag: scope
            value: capacity
      - uuid: 84f04f7645b64154bd08171a92d14fe0
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace used, bytes"
        type: DEPENDENT
        key: oracle.tbs_used_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: Currently used bytes for the tablespace (current size of datafiles
          minus the free space).
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: 8edda0e69886435185191b776cc8008b
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage, percent"
        type: DEPENDENT
        key: oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Used bytes/allocated bytes*100.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_FILE_PCT
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: d4cdfb30d2d346f69d2025c728e37d11
          expression: min(/Oracle by ODBC 
            ORA/oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage is too
            high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            is too high (over {$ORACLE.TBS.USED.PCT.MAX.HIGH}% for 5m)."
          priority: HIGH
          description: The usage of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.USED.PCT.MAX.HIGH}`%
          tags:
          - tag: scope
            value: capacity
        - uuid: 24272781b8f94785a86614a87e996c8c
          expression: min(/Oracle by ODBC 
            ORA/oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.WARN}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage is too
            high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            is too high (over {$ORACLE.TBS.USED.PCT.MAX.WARN}% for 5m)."
          priority: WARNING
          description: The usage of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.USED.PCT.MAX.WARN}`%
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage is too
              high"
            expression: min(/Oracle by ODBC 
              ORA/oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      - uuid: c3e334ca9edc4d719c0ef952db940a27
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from MAX,
          percent"
        type: DEPENDENT
        key: oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Used bytes/max bytes*100.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_FROM_MAX_PCT
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: 110b776701504e91ae38895a430c7a8e
          expression: min(/Oracle by ODBC 
            ORA/oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from MAX
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            from MAX is too high (over {$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}% for 5m)."
          priority: HIGH
          description: The usage of the tablespace `{#TABLESPACE}` from MAX exceeds
            `{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}`%
          tags:
          - tag: scope
            value: capacity
        - uuid: cfe29f3c8aad4e36bbd6662c7f344345
          expression: min(/Oracle by ODBC 
            ORA/oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from MAX
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            from MAX is too high (over {$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}% for 5m)."
          priority: WARNING
          description: The usage of the tablespace `{#TABLESPACE}` from MAX exceeds
            `{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}`%
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from
              MAX is too high"
            expression: min(/Oracle by ODBC 
              ORA/oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      - uuid: 3467d185e5984156a89c4538d6fe3107
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace allocated, percent"
        type: DEPENDENT
        key: oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Allocated bytes/max bytes*100.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_PCT_MAX
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: 9565aa334dc34b4bb2c884fa7131cc17
          expression: min(/Oracle by ODBC 
            ORA/oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high (over {$ORACLE.TBS.UTIL.PCT.MAX.HIGH}% for 5m)."
          priority: HIGH
          description: The utilization of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}`%
          tags:
          - tag: scope
            value: capacity
        - uuid: 684c497cca624cee85c3ba8cbe52d05f
          expression: min(/Oracle by ODBC 
            ORA/oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.WARN}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high (over {$ORACLE.TBS.UTIL.PCT.MAX.WARN}% for 5m)."
          priority: WARNING
          description: The utilization of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.UTIL.PCT.MAX.WARN}`%
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
              is too high"
            expression: min(/Oracle by ODBC 
              ORA/oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      graph_prototypes:
      - uuid: 49fb9936ee324e8481e9449d2dc0521a
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace '{#TABLESPACE}'"
        graph_items:
        - color: 199C0D
          item:
            host: Oracle by ODBC ORA
            key: oracle.tbs_alloc_bytes["{#CON_NAME}","{#TABLESPACE}"]
        - sortorder: '1'
          color: F63100
          item:
            host: Oracle by ODBC ORA
            key: oracle.tbs_max_bytes["{#CON_NAME}","{#TABLESPACE}"]
        - sortorder: '2'
          color: 00611C
          item:
            host: Oracle by ODBC ORA
            key: oracle.tbs_used_bytes["{#CON_NAME}","{#TABLESPACE}"]
      master_item:
        key: 
          db.odbc.get[get_tablespace,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#CONTENTS}'
        path: $.CONTENTS
      - lld_macro: '{#CON_NAME}'
        path: $.CON_NAME
      - lld_macro: '{#TABLESPACE}'
        path: $.TABLESPACE
    tags:
    - tag: class
      value: database
    - tag: target
      value: oracle
    macros:
    - macro: '{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
      value: '95'
      description: The maximum percentage of used space in the Automatic Storage Management
        (ASM) disk group for the High trigger expression.
    - macro: '{$ORACLE.ASM.USED.PCT.MAX.WARN}'
      value: '90'
      description: The maximum percentage of used space in the Automatic Storage Management
        (ASM) disk group for the Warning trigger expression.
    - macro: '{$ORACLE.CONCURRENCY.MAX.WARN}'
      value: '80'
      description: The maximum percentage of session concurrency for the Warning trigger
        expression.
    - macro: '{$ORACLE.DB.FILE.MAX.WARN}'
      value: '80'
      description: The maximum percentage of used database files for the Warning trigger
        expression.
    - macro: '{$ORACLE.DBNAME.MATCHES}'
      value: .*
      description: Used in database discovery. It can be overridden on the host or
        linked template level.
    - macro: '{$ORACLE.DBNAME.NOT_MATCHES}'
      value: PDB\$SEED
      description: Used in database discovery. It can be overridden on the host or
        linked template level.
    - macro: '{$ORACLE.DRIVER}'
      value: <Put path to oracle driver here>
      description: 'Oracle driver path. For example: `/usr/lib/oracle/21/client64/lib/libsqora.so.21.1`'
    - macro: '{$ORACLE.EXPIRE.PASSWORD.MIN.WARN}'
      value: '7'
      description: The number of days before the password expires for the Warning
        trigger expression.
    - macro: '{$ORACLE.HOST}'
      value: 172.28.2.211
      description: The hostname or IP address of the Oracle DB instance.
    - macro: '{$ORACLE.PASSWORD}'
      value: zabbixORA123
      description: Oracle user's password.
    - macro: '{$ORACLE.PGA.USE.MAX.WARN}'
      value: '90'
      description: Alert threshold for the maximum percentage of the Program Global
        Area (PGA) usage for the Warning trigger expression.
    - macro: '{$ORACLE.PORT}'
      value: '1521'
      description: Oracle Database TCP port.
    - macro: '{$ORACLE.PROCESSES.MAX.WARN}'
      value: '80'
      description: Alert threshold for the maximum percentage of active processes
        for the Warning trigger expression.
    - macro: '{$ORACLE.REDO.MIN.WARN}'
      value: '3'
      description: Alert threshold for the minimum number of redo logs for the Warning
        trigger expression.
    - macro: '{$ORACLE.SERVICE}'
      value: nms
      description: Oracle Service Name.
    - macro: '{$ORACLE.SESSION.LOCK.MAX.TIME}'
      value: '600'
      description: The maximum duration of the session lock in seconds to count the
        session as a prolongedly locked query.
    - macro: '{$ORACLE.SESSION.LONG.LOCK.MAX.WARN}'
      value: '3'
      description: Alert threshold for the maximum number of the prolongedly locked
        sessions for the Warning trigger expression.
    - macro: '{$ORACLE.SESSIONS.LOCK.MAX.WARN}'
      value: '20'
      description: Alert threshold for the maximum percentage of locked sessions for
        the Warning trigger expression.
    - macro: '{$ORACLE.SESSIONS.MAX.WARN}'
      value: '80'
      description: Alert threshold for the maximum percentage of active sessions for
        the Warning trigger expression.
    - macro: '{$ORACLE.SHARED.FREE.MIN.WARN}'
      value: '5'
      description: Alert threshold for the minimum percentage of free shared pool
        for the Warning trigger expression.
    - macro: '{$ORACLE.TABLESPACE.CONTAINER.MATCHES}'
      value: .*
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TABLESPACE.CONTAINER.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
      value: .*
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}'
      value: '95'
      description: High severity alert threshold for the maximum percentage of tablespace
        usage (used bytes/max bytes) for the High trigger expression.
    - macro: '{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}'
      value: '90'
      description: Warning severity alert threshold for the maximum percentage of
        tablespace usage from maximum tablespace size (used bytes/max bytes) for the
        Warning trigger expression.
    - macro: '{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
      value: '95'
      description: High severity alert threshold for the maximum percentage of tablespace
        usage (used bytes/allocated bytes) for the High trigger expression.
    - macro: '{$ORACLE.TBS.USED.PCT.MAX.WARN}'
      value: '90'
      description: Warning severity alert threshold for the maximum percentage of
        tablespace usage (used bytes/allocated bytes) for the Warning trigger expression.
    - macro: '{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}'
      value: '90'
      description: High severity alert threshold for the maximum percentage of tablespace
        utilization (allocated bytes/max bytes) for the High trigger expression.
    - macro: '{$ORACLE.TBS.UTIL.PCT.MAX.WARN}'
      value: '80'
      description: Warning severity alert threshold for the maximum percentage of
        tablespace utilization (allocated bytes/max bytes) for the High trigger expression.
    - macro: '{$ORACLE.USER}'
      value: c##zabbix_mon
      description: Oracle username.
    dashboards:
    - uuid: e200a9b77b1d41ba8b6170c32c586a35
      name: Oracle Performance
      pages:
      - widgets:
        - type: graph
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Cache Hit Ratios'
          - type: STRING
            name: reference
            value: AAAAA
        - type: graph
          y: '5'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Physical Read\Write Rate'
          - type: STRING
            name: reference
            value: AAAAC
        - type: graph
          y: '10'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Datafiles'
          - type: STRING
            name: reference
            value: AAAAE
        - type: graph
          y: '15'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Processes'
          - type: STRING
            name: reference
            value: AAAAG
        - type: graph
          y: '20'
          width: '72'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: SGA Memory Usage'
          - type: STRING
            name: reference
            value: AAAAI
        - type: graph
          x: '36'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Sort Operations'
          - type: STRING
            name: reference
            value: AAAAB
        - type: graph
          x: '36'
          y: '5'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Physical Read\Write Rate, Bytes'
          - type: STRING
            name: reference
            value: AAAAD
        - type: graph
          x: '36'
          y: '10'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: PGA'
          - type: STRING
            name: reference
            value: AAAAF
        - type: graph
          x: '36'
          y: '15'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC ORA
              name: 'Oracle: Sessions'
          - type: STRING
            name: reference
            value: AAAAH
    valuemaps:
    - uuid: 7ba0e51c5941486d9836f2574abe903c
      name: Oracle Archivelog status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Error
      - value: '2'
        newvalue: Deferred
      - value: '3'
        newvalue: Valid
    - uuid: a42ee162e4c94bb7a013170119e40cc0
      name: Oracle archiver state
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Stopped
      - value: '2'
        newvalue: Started
      - value: '3'
        newvalue: Failed
    - uuid: d245451af66a4619a8605eea2e44f960
      name: Oracle DB open status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Mounted
      - value: '2'
        newvalue: Read Only
      - value: '3'
        newvalue: Read-Write
      - value: '4'
        newvalue: Read Only with Apply
    - uuid: 172ac485c253481f9225480baa6d544d
      name: Oracle DB role
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Snapshot standby
      - value: '2'
        newvalue: Logical standby
      - value: '3'
        newvalue: Physical standby
      - value: '4'
        newvalue: Primary
      - value: '5'
        newvalue: Far sync
    - uuid: 8a58cb8e77aa43f1999e26c3abf2f32e
      name: Oracle force log status
      mappings:
      - value: '0'
        newvalue: No
      - value: '1'
        newvalue: Yes
    - uuid: c50f73c06b7c4ddd8b26db21b7633549
      name: Oracle instance role
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Primary
      - value: '2'
        newvalue: Secondary
    - uuid: fb4361014f274f9182d8dafa3b0b4ccd
      name: Oracle instance status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Started
      - value: '2'
        newvalue: Mounted
      - value: '3'
        newvalue: Open
      - value: '4'
        newvalue: Open migrate
    - uuid: cba23388ec8f4be5a72316ecf9d91fe4
      name: Oracle log mode
      mappings:
      - value: '0'
        newvalue: NOARCHIVELOG
      - value: '1'
        newvalue: ARCHIVELOG
      - value: '2'
        newvalue: MANUAL
    - uuid: 0e4b8e1b8bf44ef7a8fbe0a28407f7dd
      name: Oracle tablespace status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Online
      - value: '2'
        newvalue: Offline
      - value: '3'
        newvalue: Read-Only
    - uuid: 71e66eb086a744ae8558fcb436965fe3
      name: Service state
      mappings:
      - value: '0'
        newvalue: Down
      - value: '1'
        newvalue: Up
  triggers:
  - uuid: 2a3e77a73df847c1a2f1cfc4cc4dd955
    expression: max(/Oracle by ODBC ORA/net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}],#3)=0  and
      max(/Oracle by ODBC ORA/proc.num[,,,"tnslsnr LISTENER"],#3)>0
    name: Port {$ORACLE.PORT} is unavailable
    priority: DISASTER
    description: The TCP port of the Oracle Server service is currently unavailable.
    tags:
    - tag: scope
      value: availability
  - uuid: 1bee4f40802941d1912cc8305158f2b0
    expression: min(/Oracle by ODBC ORA/oracle.processes_count,5m) * 100 / last(/Oracle
      by ODBC ORA/oracle.processes_limit) > {$ORACLE.PROCESSES.MAX.WARN}
    name: Too many active processes
    event_name: Too many active processes (over {$ORACLE.PROCESSES.MAX.WARN}% for
      5 min)
    priority: WARNING
    description: Active processes are using more than `{$ORACLE.PROCESSES.MAX.WARN}`%
      of the available number of processes.
    tags:
    - tag: scope
      value: capacity
  - uuid: 59bf1ffb448a46c2b55087b16f3df8dc
    expression: min(/Oracle by ODBC ORA/oracle.session_count,5m) * 100 / last(/Oracle
      by ODBC ORA/oracle.session_limit) > {$ORACLE.SESSIONS.MAX.WARN}
    name: Too many active sessions
    event_name: Too many active sessions (over {$ORACLE.SESSIONS.MAX.WARN}% for 5
      min)
    priority: WARNING
    description: Active sessions are using more than `{$ORACLE.SESSIONS.MAX.WARN}`%
      of the available sessions.
    tags:
    - tag: scope
      value: capacity
  - uuid: d4eb7d75b48c4b0ea9c8265e988d05e0
    expression: min(/Oracle by ODBC ORA/oracle.db_files_count,5m) * 100 / last(/Oracle
      by ODBC ORA/oracle.db_files_limit) > {$ORACLE.DB.FILE.MAX.WARN}
    name: Too many database files
    event_name: Too many database files (over {$ORACLE.DB.FILE.MAX.WARN}% for 5 min)
    priority: WARNING
    description: The number of datafiles is higher than `{$ORACLE.DB.FILE.MAX.WARN}`%
      of the available datafile limit.
    tags:
    - tag: scope
      value: capacity
  - uuid: 82c0253237b24da899fa3679adeb4339
    expression: min(/Oracle by ODBC ORA/oracle.total_pga_used,5m) * 100 / last(/Oracle
      by ODBC ORA/oracle.pga_target) > {$ORACLE.PGA.USE.MAX.WARN}
    name: Total PGA inuse is too high
    event_name: Total PGA inuse is too high (over {$ORACLE.PGA.USE.MAX.WARN}% for
      5 min)
    priority: WARNING
    description: The total PGA currently consumed by work areas is more than `{$ORACLE.PGA.USE.MAX.WARN}`%
      of `PGA_AGGREGATE_TARGET`.
    tags:
    - tag: scope
      value: capacity
  graphs:
  - uuid: df32120cfd8743f0b2de9529a8371aba
    name: 'Oracle: Cache Hit Ratios'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.buffer_cache_hit_ratio
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.library_cache_hit_ratio
  - uuid: 4148f532626440d3b98e92bdfe16d162
    name: 'Oracle: Datafiles'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.db_files_count
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.db_files_limit
  - uuid: e37abfc4243d46cd81d28033386655a6
    name: 'Oracle: PGA'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.total_pga_used
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.pga_target
    - sortorder: '2'
      color: 00611C
      item:
        host: Oracle by ODBC ORA
        key: oracle.total_pga_allocated
  - uuid: f68566f787f64a68ba64629821c2c29d
    name: 'Oracle: Physical Read\Write Rate'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.physical_writes_rate
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.physical_reads_rate
  - uuid: 1419134b63884fb1b67d65072e4538f3
    name: 'Oracle: Physical Read\Write Rate, Bytes'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.physical_write_bytes_rate
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.physical_read_bytes_rate
  - uuid: f4ebc2509f3f4b07bad01813fa88574d
    name: 'Oracle: Processes'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.processes_count
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.processes_limit
  - uuid: 2147491148004733b84f18605d48da2f
    name: 'Oracle: Sessions'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.session_count
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.session_active_background
    - sortorder: '2'
      color: 00611C
      item:
        host: Oracle by ODBC ORA
        key: oracle.session_inactive_user
    - sortorder: '3'
      color: F7941D
      item:
        host: Oracle by ODBC ORA
        key: oracle.session_active_user
    - sortorder: '4'
      color: FC6EA3
      item:
        host: Oracle by ODBC ORA
        key: oracle.session_limit
  - uuid: 9f4429b4f63647c0a24a479ac8eeb7da
    name: 'Oracle: SGA Memory Usage'
    type: STACKED
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.sga_java_pool
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.sga_large_pool
    - sortorder: '2'
      color: 00611C
      item:
        host: Oracle by ODBC ORA
        key: oracle.sga_shared_pool
    - sortorder: '3'
      color: F7941D
      item:
        host: Oracle by ODBC ORA
        key: oracle.sga_log_buffer
    - sortorder: '4'
      color: FC6EA3
      item:
        host: Oracle by ODBC ORA
        key: oracle.sga_fixed
    - sortorder: '5'
      color: 6C59DC
      item:
        host: Oracle by ODBC ORA
        key: oracle.sga_buffer_cache
  - uuid: 17e078a33ba9478694e095a07e36a598
    name: 'Oracle: Sort Operations'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC ORA
        key: oracle.memory_sorts_ratio
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC ORA
        key: oracle.disk_sorts
