zabbix_export:
  version: '7.0'
  template_groups:
  - uuid: 36bff6c29af64692839d077febfc7079
    name: Templates/Network devices
  templates:
  - uuid: 8243d89dad154f9a8c37b3cacd12e399
    template: ICMP Ping2
    name: ICMP Ping2
    description: |
      Template Net ICMP Ping

      Generated by official Zabbix template tool "Templator"
    groups:
    - name: Templates/Network devices
    items:
    - uuid: a615efd559074ae8b0394ff01d80d7f8
      name: ICMP loss
      type: SIMPLE
      key: icmppingloss[{HOST.CONN}]
      history: 7d
      value_type: FLOAT
      units: '%'
      tags:
      - tag: component
        value: health
      - tag: component
        value: network
      triggers:
      - uuid: 4b938cf04edc4ddc8a88bb65b881f2cd
        expression: min(/ICMP Ping2/icmppingloss[{HOST.CONN}],5m)>{$ICMP_LOSS_WARN}
          and min(/ICMP Ping2/icmppingloss[{HOST.CONN}],5m)<100
        name: High ICMP ping loss
        opdata: 'Loss: {ITEM.LASTVALUE1}'
        priority: WARNING
        dependencies:
        - name: Unavailable by ICMP ping
          expression: max(/ICMP Ping2/icmpping[{HOST.CONN}],#3)=0
        tags:
        - tag: scope
          value: availability
        - tag: scope
          value: performance
    - uuid: 58c756d20a6c4f059cee45092f2bc1cb
      name: ICMP response time
      type: SIMPLE
      key: icmppingsec[{HOST.CONN}]
      history: 7d
      value_type: FLOAT
      units: s
      tags:
      - tag: component
        value: health
      - tag: component
        value: network
      triggers:
      - uuid: 800839ea03494714a87406ac62c9d825
        expression: avg(/ICMP Ping2/icmppingsec[{HOST.CONN}],5m)>{$ICMP_RESPONSE_TIME_WARN}
        name: High ICMP ping response time
        opdata: 'Value: {ITEM.LASTVALUE1}'
        priority: WARNING
        description: Average ICMP response time is too high.
        dependencies:
        - name: High ICMP ping loss
          expression: min(/ICMP Ping2/icmppingloss[{HOST.CONN}],5m)>{$ICMP_LOSS_WARN}
            and min(/ICMP Ping2/icmppingloss[{HOST.CONN}],5m)<100
        - name: Unavailable by ICMP ping
          expression: max(/ICMP Ping2/icmpping[{HOST.CONN}],#3)=0
        tags:
        - tag: scope
          value: availability
        - tag: scope
          value: performance
    - uuid: 5080a50d33b44939b8ab6bba6f4e30a2
      name: ICMP ping
      type: SIMPLE
      key: icmpping[{HOST.CONN}]
      history: 7d
      valuemap:
        name: Service state
      tags:
      - tag: component
        value: health
      - tag: component
        value: network
      triggers:
      - uuid: dad524241a834455827e80f37a14d995
        expression: max(/ICMP Ping2/icmpping[{HOST.CONN}],#3)=0
        name: Unavailable by ICMP ping
        priority: HIGH
        description: Last three attempts returned timeout.  Please check device connectivity.
        tags:
        - tag: scope
          value: availability
    tags:
    - tag: class
      value: network
    - tag: target
      value: icmp
    macros:
    - macro: '{$ICMP_LOSS_WARN}'
      value: '20'
      description: Warning threshold of ICMP packet loss in %.
    - macro: '{$ICMP_RESPONSE_TIME_WARN}'
      value: '0.15'
      description: Warning threshold of the average ICMP response time in seconds.
    valuemaps:
    - uuid: 34820e0cec0a4d98a6356b99ffc00d05
      name: Service state
      mappings:
      - value: '0'
        newvalue: Down
      - value: '1'
        newvalue: Up
