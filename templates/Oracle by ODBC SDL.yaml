zabbix_export:
  version: '7.0'
  template_groups:
  - uuid: 748ad4d098d447d492bb935c907f652f
    name: Templates/Databases
  templates:
  - uuid: 09c1b193aea74cf4b430a9eb754428a7
    template: Oracle by ODBC SDL
    name: Oracle by ODBC SDL
    description: |
      1. Create an Oracle user for monitoring.

      2. Set the hostname or IP address of the Oracle DB instance, user name and password in host macros ({$ORACLE.HOST}, {$ORACLE.USER} and {$ORACLE.PASSWORD}).
        Do not forget to install the Microsoft ODBC driver on the Zabbix server or the Zabbix proxy.
        See Oracle documentation for instructions: https://www.oracle.com/database/technologies/releasenote-odbc-ic.html.

        Note! Credentials in the odbc.ini do not work for Oracle.
        Note! Be sure that ODBC connects to Oracle with session parameter NLS_NUMERIC_CHARACTERS= '.,' It is important for correct display float numbers in Zabbix.
      The "Service's TCP port state" item uses {$ORACLE.HOST} and {$ORACLE.PORT} macros to check the availability of the listener.

      Generated by official Zabbix template tool "Templator"
    groups:
    - name: Templates/Databases
    items:
    - uuid: af592b6b30f04815a0328a732ed87b60
      name: Get archive log
      type: ODBC
      key: 
        db.odbc.get[get_archivelog,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT d.dest_name
        FROM v$archive_dest d , v$database db WHERE d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the destinations of the log archive.
      tags:
      - tag: component
        value: raw
    - uuid: 269fdc73365d4ff8959ad1e1c891367f
      name: Get ASM disk groups
      type: ODBC
      key: 
        db.odbc.get[get_asm,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: SELECT name AS dgname FROM v$asm_diskgroup;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the ASM disk groups.
      tags:
      - tag: component
        value: raw
    - uuid: 3e3599f5aa75420e8cabc8f97911dc6d
      name: Get database
      type: ODBC
      key: 
        db.odbc.get[get_db,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: SELECT name as DBNAME, DECODE(CDB, 'YES', 'CDB', 'No-CDB') AS TYPE  FROM
        V$DATABASE;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the databases in the database management system (DBMS).
      tags:
      - tag: component
        value: raw
    - uuid: e5828e2f72844273bbf3e023dfc775ef
      name: Get instance state
      type: ODBC
      key: 
        db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT
        INSTANCE_NAME,
        HOST_NAME,
        VERSION || '-' || EDITION AS VERSION,
        floor((SYSDATE - startup_time)*60*60*24) AS UPTIME,
        decode(status,'STARTED',1,'MOUNTED',2,'OPEN',3,'OPEN MIGRATE',4, 0) AS STATUS,
        decode(archiver,'STOPPED',1,'STARTED',2,'FAILED',3, 0) AS  ARCHIVER,
        decode(instance_role,'PRIMARY_INSTANCE',1,'SECONDARY_INSTANCE',2, 0) AS  INSTANCE_ROLE
        FROM v$instance;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the state of the current instance.
      tags:
      - tag: component
        value: raw
    - uuid: c8f6f47e8e264d4cae18ebbbf96d51a6
      name: Get PDB
      type: ODBC
      key: 
        db.odbc.get[get_pdb,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: SELECT name as DBNAME FROM V$PDBS;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the pluggable database (PDB) in DBMS.
      tags:
      - tag: component
        value: raw
    - uuid: 24d24f97d2474299b2f2ae95783b30b5
      name: Get system metrics
      type: ODBC
      key: 
        db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 0;m0-59
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT 'SYS::' || METRIC_NAME AS METRIC, ROUND(VALUE,3) as VALUE
         FROM V$SYSMETRIC WHERE GROUP_ID = 2
        UNION
          SELECT 'SYSPARAM::' || INITCAP(NAME) AS METRIC, to_number(VALUE)
          FROM V$SYSTEM_PARAMETER WHERE NAME IN ('sessions', 'processes', 'db_files')
        UNION
         SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
        UNION
        SELECT 'SESSION::Lock rate' ,(cnt_block / cnt_all)* 100 pct
        FROM ( SELECT COUNT(*) cnt_block FROM v$session WHERE blocking_session IS NOT NULL), ( SELECT COUNT(*) cnt_all FROM v$session)
        UNION
          SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
        UNION
         SELECT 'SESSION::Total', COUNT(*) AS VALUE FROM V$SESSION
        UNION
        SELECT 'SESSION::Concurrency rate', NVL(ROUND(SUM(duty_act.cnt*100 / num_cores.val)), 0)
        FROM
        ( SELECT DECODE(session_state, 'ON CPU', 'CPU', wait_class) wait_class, ROUND(COUNT(*)/(60 * 15), 1) cnt
        FROM v$active_session_history sh
        WHERE sh.sample_time >= SYSDATE - 15 / 1440 AND DECODE(session_state, 'ON CPU', 'CPU', wait_class) IN('Concurrency')
        GROUP BY DECODE(session_state, 'ON CPU', 'CPU', wait_class)) duty_act,
        ( SELECT SUM(value) val FROM v$osstat WHERE stat_name = 'NUM_CPU_CORES') num_cores
        UNION
         SELECT 'PGA::' || INITCAP(NAME), VALUE FROM V$PGASTAT
        UNION
         SELECT 'FRA::Space Limit' AS METRIC, space_limit AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Space Used', space_used AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Space Reclaimable', space_reclaimable AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Number Of Files', number_of_files AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Usable Pct', DECODE(space_limit, 0, 0,(100-(100 *(space_used-space_reclaimable)/ space_limit))) AS VALUE FROM V$RECOVERY_FILE_DEST
        UNION
         SELECT 'FRA::Restore Point', COUNT(*) AS VALUE FROM V$RESTORE_POINT
        UNION
         SELECT 'PROC::Procnum', COUNT(*) FROM v$process
        UNION
         SELECT 'DATAFILE::Count', COUNT(*) FROM v$datafile
        UNION
         SELECT 'SGA::' || INITCAP(pool), SUM(bytes) FROM V$SGASTAT
         WHERE pool IN ( 'java pool', 'large pool' ) GROUP BY pool
        UNION
         SELECT 'SGA::Shared Pool', SUM(bytes) FROM V$SGASTAT
         WHERE pool = 'shared pool' AND name NOT IN ('library cache', 'dictionary cache', 'free memory', 'sql area')
        UNION
         SELECT 'SGA::' || INITCAP(name), bytes FROM V$SGASTAT
         WHERE pool IS NULL AND name IN ('log_buffer', 'fixed_sga')
        UNION
         SELECT 'SGA::Buffer_Cache', SUM(bytes) FROM V$SGASTAT
         WHERE pool IS NULL AND name IN ('buffer_cache', 'db_block_buffers')
        UNION
         SELECT 'REDO::Available', count(*) from v$log t where t.status in ('INACTIVE', 'UNUSED')
        UNION
         SELECT 'USER::Expire password', ROUND(DECODE(SIGN(NVL(u.expiry_date, SYSDATE + 999) - SYSDATE),-1, 0, NVL(u.expiry_date, SYSDATE + 999) - SYSDATE)) exp_passwd_days_before
        FROM dba_users u WHERE username = UPPER('{$ORACLE.USER}');
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets the values of the system metrics.
      tags:
      - tag: component
        value: raw
    - uuid: 9f89f7e0ef994264b060b5b25a50d1a9
      name: Get tablespace
      type: ODBC
      key: 
        db.odbc.get[get_tablespace,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      delay: 1h
      history: '0'
      value_type: TEXT
      trends: '0'
      params: |
        SELECT NVL(CON$NAME, 'DB') CON_NAME,
        TABLESPACE_NAME TABLESPACE,
        CONTENTS
        FROM CDB_TABLESPACES;
      username: '{$ORACLE.USER}'
      password: '{$ORACLE.PASSWORD}'
      description: Gets tablespaces in DBMS.
      tags:
      - tag: component
        value: raw
    - uuid: d8a89f0fad4b466ead1b7d9b7287badd
      name: Service's TCP port state
      key: net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}]
      delay: 30s
      history: 7d
      description: Checks the availability of Oracle on the TCP port.
      valuemap:
        name: Service state
      preprocessing:
      - type: DISCARD_UNCHANGED_HEARTBEAT
        parameters:
        - 10m
      tags:
      - tag: component
        value: health
      - tag: component
        value: network
    - uuid: 9ad314ddd5fa48c08752cbd85e05a461
      name: Active parallel sessions
      type: DEPENDENT
      key: oracle.active_parallel_sessions
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active parallel sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Active Parallel Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 1ab182dfb63849699dd8e63dcf094e50
      name: Active serial sessions
      type: DEPENDENT
      key: oracle.active_serial_sessions
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active serial sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Active Serial Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 8d309c4dab864f73af9257e3015c3d3f
      name: Average active sessions
      type: DEPENDENT
      key: oracle.active_sessions
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The average number of active sessions at a point in time that are
        either working or waiting.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Average Active Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: cbebf095ac9c4234956d8d42465f151c
      name: Archiver state
      type: DEPENDENT
      key: oracle.archiver_state
      delay: '0'
      history: 7d
      description: The status of automatic archiving.
      valuemap:
        name: Oracle archiver state
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..ARCHIVER.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 8a97d7c54dcb4520ab133b996ea3e1df
      name: Buffer cache hit ratio
      type: DEPENDENT
      key: oracle.buffer_cache_hit_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio of buffer cache hits ((LogRead - PhyRead)/LogRead).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Buffer Cache Hit Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 1c8d570c24894522a7a01c7e5983fa78
      name: Global cache blocks corrupted
      type: DEPENDENT
      key: oracle.cache_blocks_corrupt
      delay: '0'
      history: 7d
      units: Rps
      description: The number of blocks that encountered corruption or checksum failure
        during the interconnect.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Global Cache Blocks Corrupted')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 8c4b2f3df3fe4b94a706ced3a99a2d97
      name: Global cache blocks lost
      type: DEPENDENT
      key: oracle.cache_blocks_lost
      delay: '0'
      history: 7d
      units: Rps
      description: The number of lost global cache blocks.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Global Cache Blocks Lost')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 0daf00a661be4a1a9d88e9b0391b1636
      name: Cursor cache hit ratio
      type: DEPENDENT
      key: oracle.cursor_cache_hit_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio of cursor cache hits (CursorCacheHit/SoftParse).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Cursor Cache Hit Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: 812a022c77cf4fea8114ac8540a02f64
      name: Database CPU time ratio
      type: DEPENDENT
      key: oracle.database_cpu_time_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio calculated by dividing the total CPU (used by the database)
        by the Oracle time model statistic DB time.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Database CPU Time Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cpu
    - uuid: 18e9fb98c8334d38811f41c3ed95518e
      name: Database wait time ratio
      type: DEPENDENT
      key: oracle.database_wait_time_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: Wait time - the time that the server process spends waiting for
        available shared resources to be released by other server processes such as
        latches, locks, data buffers, etc.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Database Wait Time Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: a793399a9ea84f63925caf38457ce57f
      name: Datafiles count
      type: DEPENDENT
      key: oracle.db_files_count
      delay: '0'
      history: 7d
      description: The current number of datafiles.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='DATAFILE::Count')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: datafiles
    - uuid: b218d93b94ed4d4f8a0999752fe29cf9
      name: Datafiles limit
      type: DEPENDENT
      key: oracle.db_files_limit
      delay: '0'
      history: 7d
      description: The maximum allowable number of datafiles.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYSPARAM::Db_Files')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: datafiles
    - uuid: 6d2d1e125c46476fa850bdc37287a364
      name: Disk sort per second
      type: DEPENDENT
      key: oracle.disk_sorts
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of sorts going to disk per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Disk Sort Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 9bd4065fc0bd4f2e9aa9d03380b1f67e
      name: Enqueue timeouts per second
      type: DEPENDENT
      key: oracle.enqueue_timeouts_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: Enqueue timeouts per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Enqueue Timeouts Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: dda216f8351840d79d4263ab95a7fd59
      name: FRA, Number of files
      type: DEPENDENT
      key: oracle.fra_number_of_files
      delay: '0'
      history: 7d
      description: The number of files in the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Number Of Files')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 6c2ae90f1cc94fdca2a8a6d7318dd4af
      name: FRA, Number of restore points
      type: DEPENDENT
      key: oracle.fra_restore_point
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: Number of restore points in the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Restore Point')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 123c2f215ce14802ba619d739db79600
      name: FRA, Space limit
      type: DEPENDENT
      key: oracle.fra_space_limit
      delay: '0'
      history: 7d
      units: B
      description: The maximum amount of disk space (in bytes) that the database can
        use for the Fast Recovery Area (FRA).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Space Limit')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 41c5fb8921f14c17b748adea6a1b6f28
      name: FRA, Space reclaimable
      type: DEPENDENT
      key: oracle.fra_space_reclaimable
      delay: '0'
      history: 7d
      units: B
      description: The total amount of disk space (in bytes) that can be created by
        deleting obsolete, redundant, and other low-priority files from the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Space Reclaimable')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 5eb9f9f77f1948c2b4fb9e35fdc161b0
      name: FRA, Used space
      type: DEPENDENT
      key: oracle.fra_space_used
      delay: '0'
      history: 7d
      units: B
      description: The amount of disk space (in bytes) used by FRA files created in
        the current and all the previous FRAs.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Space Used')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 7506611abbcf41c6987b84252e653a7e
      name: FRA, Usable space in %
      type: DEPENDENT
      key: oracle.fra_usable_pct
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: Percentage of space usable in the FRA.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='FRA::Usable Pct')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: fra
    - uuid: 7340847fe1a543e8a7ba108c64e33013
      name: GC CR block received per second
      type: DEPENDENT
      key: oracle.gc_cr_block_received_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The global cache (GC) and the consistent read (CR) block received
        per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::GC CR Block Received Per Second')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: b60c7e5cf53d4735b5f2190cec7629bd
      name: Instance role
      type: DEPENDENT
      key: oracle.instance.role
      delay: '0'
      history: 7d
      description: Indicates whether the instance is an active instance or an inactive
        secondary instance.
      valuemap:
        name: Oracle instance role
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..INSTANCE_ROLE.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 6db4bd5150264c51a00956b6edcd1617
      name: Instance hostname
      type: DEPENDENT
      key: oracle.instance_hostname
      delay: '0'
      history: 7d
      value_type: CHAR
      trends: '0'
      description: The name of the host machine.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..HOST_NAME.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 74df716772d4416aa0d920adb09bc466
        expression: last(/Oracle by ODBC SDL/oracle.instance_hostname,#1)<>last(/Oracle
          by ODBC SDL/oracle.instance_hostname,#2) and length(last(/Oracle by ODBC
          SDL/oracle.instance_hostname))>0
        name: Instance hostname has changed
        event_name: 'Instance hostname has changed (new hostname received: {ITEM.VALUE})'
        priority: INFO
        description: An Oracle Database instance hostname has changed. Acknowledge
          to close the problem manually.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: 35e8a683d3f24ad5a13071cb4dbf7db4
      name: Instance name
      type: DEPENDENT
      key: oracle.instance_name
      delay: '0'
      history: 7d
      value_type: CHAR
      trends: '0'
      description: The name of the instance.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..INSTANCE_NAME.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 81efa4fe41ee4ecfb427441de7889fe9
        expression: last(/Oracle by ODBC SDL/oracle.instance_name,#1)<>last(/Oracle
          by ODBC SDL/oracle.instance_name,#2) and length(last(/Oracle by ODBC SDL/oracle.instance_name))>0
        name: Instance name has changed
        event_name: 'Instance name has changed (new name received: {ITEM.VALUE})'
        priority: INFO
        description: An Oracle Database instance name has changed. Acknowledge to
          close the problem manually.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: c168f92b7f0447dc97dc0dc8c68d1791
      name: Instance status
      type: DEPENDENT
      key: oracle.instance_status
      delay: '0'
      history: 7d
      description: The status of the instance.
      valuemap:
        name: Oracle instance status
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..STATUS.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 15a0fec23eb04040b5773971710f96b0
      name: Library cache hit ratio
      type: DEPENDENT
      key: oracle.library_cache_hit_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The ratio of library cache hits (Hits/Pins).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Library Cache Hit Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
    - uuid: e564c5d371044152a40956c6d8b229f2
      name: Logons per second
      type: DEPENDENT
      key: oracle.logons_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of logon attempts.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Logons Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: fa2afeae4b8446eb99a70a78669d3a19
      name: Long table scans per second
      type: DEPENDENT
      key: oracle.long_table_scans_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of long table scans per second. A table is considered
        long if it is not cached and if its high water mark is greater than five blocks.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Long Table Scans Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 8c25df88c22e482ea8c324ba98c56ae0
      name: Memory sorts ratio
      type: DEPENDENT
      key: oracle.memory_sorts_ratio
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The percentage of sorts (from `ORDER BY` clauses or index building)
        that are done to disk vs. in-memory.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Memory Sorts Ratio')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 01f9032253244c6cb30181837f4b7984
      name: PGA, Global memory bound
      type: DEPENDENT
      key: oracle.pga_global_bound
      delay: '0'
      history: 7d
      units: B
      description: The maximum size of a work area executed in automatic mode.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Global Memory Bound')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: d5d6019c9fa84614a362af5600793ebe
      name: PGA, Aggregate target parameter
      type: DEPENDENT
      key: oracle.pga_target
      delay: '0'
      history: 7d
      units: B
      description: The current value of the `PGA_AGGREGATE_TARGET` initialization
        parameter. If this parameter is not set, then its value is "0" and automatic
        management of the PGA memory is disabled.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Aggregate Pga Target Parameter')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: f0f0d27919a84648884ed5bcc23270f2
      name: Physical reads per second
      type: DEPENDENT
      key: oracle.physical_reads_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: Reads per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Reads Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 9dba153b3a504a449b0ff13a3b519424
      name: Physical reads bytes per second
      type: DEPENDENT
      key: oracle.physical_read_bytes_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Bps
      description: Read bytes per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Read Bytes Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 8960c7d75bd84cea8453642e76ec7e6e
      name: Physical writes per second
      type: DEPENDENT
      key: oracle.physical_writes_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: Writes per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Writes Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 87cd7ede514d4c5096e82efefebd1da9
      name: Physical writes bytes per second
      type: DEPENDENT
      key: oracle.physical_write_bytes_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Bps
      description: Write bytes per second.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Physical Write Bytes Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: disk
    - uuid: 67e2be8c53df4be6bf187b7e2c8e8328
      name: Number of processes
      type: DEPENDENT
      key: oracle.processes_count
      delay: '0'
      history: 7d
      description: The current number of user processes.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PROC::Procnum')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: system
    - uuid: 328805bf74d2485daebb0a7e7596bcc4
      name: Processes limit
      type: DEPENDENT
      key: oracle.processes_limit
      delay: '0'
      history: 7d
      description: The maximum number of user processes.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYSPARAM::Processes')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: system
    - uuid: 8ba4a7fdb6b946428bbc013c5918d64e
      name: Redo logs available to switch
      type: DEPENDENT
      key: oracle.redo_logs_available
      delay: '0'
      history: 7d
      description: The number of inactive/unused redo logs available for log switching.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='REDO::Available')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: fb6182081519449a97a1946744b00290
        expression: max(/Oracle by ODBC SDL/oracle.redo_logs_available,5m) < {$ORACLE.REDO.MIN.WARN}
        name: Number of REDO logs available for switching is too low
        event_name: Number of REDO logs available for switching is too low (less {$ORACLE.REDO.MIN.WARN}
          for 5 min)
        priority: WARNING
        description: The number of inactive/unused redos available for log switching
          is low (risk of database downtime).
        tags:
        - tag: scope
          value: capacity
    - uuid: 6e90f2b748384723a998dd7893e73bf4
      name: Rows per sort
      type: DEPENDENT
      key: oracle.rows_per_sort
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The average number of rows per sort for all types of sorts performed.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Rows Per Sort')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 00fc5f653ba74733aaf7a3c9761e0d1b
      name: SQL service response time
      type: DEPENDENT
      key: oracle.service_response_time
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: s
      description: The Structured Query Language (SQL) service response time expressed
        in seconds.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::SQL Service Response Time')].VALUE.first()
      - type: MULTIPLIER
        parameters:
        - '0.01'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: 76b4bdd7f24d424b8fe2d2cdb15757ff
      name: Active background sessions
      type: DEPENDENT
      key: oracle.session_active_background
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active background sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Active Background')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 4aba170f25ab45e1a1a048670b2c17cc
      name: Active user sessions
      type: DEPENDENT
      key: oracle.session_active_user
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of active user sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Active User')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: b1e51f530ee14efea72016eca1c62b3c
      name: Sessions concurrency
      type: DEPENDENT
      key: oracle.session_concurrency_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The percentage of concurrency. Concurrency is a database behavior
        when different transactions request to change the same resource. In the case
        of modifying data transactions, it sequentially temporarily blocks the right
        to change the data, and the rest of the transactions wait for access. When
        the access to a resource is locked for a long time, the concurrency grows
        (like the transaction queue), often leaving an extremely negative impact on
        performance. A high contention value does not indicate the root cause of the
        problem, but is a signal to search for it.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Concurrency rate')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
      triggers:
      - uuid: d4c7ee9001024f02a4b4113af4390130
        expression: min(/Oracle by ODBC SDL/oracle.session_concurrency_rate,5m) >
          {$ORACLE.CONCURRENCY.MAX.WARN}
        name: Too high database concurrency
        event_name: Too high database concurrency (over {$ORACLE.CONCURRENCY.MAX.WARN}%
          for 5 min)
        priority: WARNING
        description: The concurrency rate exceeds `{$ORACLE.CONCURRENCY.MAX.WARN}`%.
          A high contention value does not indicate the root cause of the problem,
          but is a signal to review resource consumption (determine the "heaviest"
          queries in the database, trace sessions, etc.) This will help find the root
          cause and possible optimization points both in database configuration and
          the logic of building queries.
        tags:
        - tag: scope
          value: performance
    - uuid: a2ef135abc384e2fa0f4029d328ebef3
      name: Session count
      type: DEPENDENT
      key: oracle.session_count
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The session count.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Total')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 635ed00bc7d4489fb1a5cda3a068682d
      name: Inactive user sessions
      type: DEPENDENT
      key: oracle.session_inactive_user
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The number of inactive user sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Inactive User')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 2ce7fcdf7db84109b984ab2e1fc7a767
      name: Sessions limit
      type: DEPENDENT
      key: oracle.session_limit
      delay: '0'
      history: 7d
      description: The user and system sessions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYSPARAM::Sessions')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
    - uuid: 5d4a565365d64e9f8457c41e32db4f12
      name: Sessions lock rate
      type: DEPENDENT
      key: oracle.session_lock_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: The percentage of locked sessions. Locks are mechanisms that prevent
        destructive interaction between transactions accessing the same resource -
        either user objects, such as tables and rows or system objects not visible
        to users, such as shared data structures in memory and data dictionary rows.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Lock rate')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
      triggers:
      - uuid: 3d12d705ed6e4c91a0880778c7330201
        expression: min(/Oracle by ODBC SDL/oracle.session_lock_rate,5m) > {$ORACLE.SESSIONS.LOCK.MAX.WARN}
        name: Too many locked sessions
        event_name: Too many locked sessions (over {$ORACLE.SESSIONS.LOCK.MAX.WARN}%
          for 5 min)
        priority: WARNING
        description: The number of locked sessions exceeds `{$ORACLE.SESSIONS.LOCK.MAX.WARN}`%
          of the running sessions.
        tags:
        - tag: scope
          value: performance
    - uuid: f60d9bc7a82e45a988a8594162551dbf
      name: Sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s
      type: DEPENDENT
      key: oracle.session_long_time_locked
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The count of the prolongedly locked sessions. (You can change the
        duration of the maximum session lock in seconds for a query using the `{$ORACLE.SESSION.LOCK.MAX.TIME}`
        macro. Default = 600 s).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SESSION::Long time locked')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: sessions
      triggers:
      - uuid: 9537c93d73534825b5be26c169d52c7c
        expression: min(/Oracle by ODBC SDL/oracle.session_long_time_locked,5m) >
          {$ORACLE.SESSION.LONG.LOCK.MAX.WARN}
        name: Too many sessions locked
        event_name: Too many sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s
          (over {$ORACLE.SESSION.LONG.LOCK.MAX.WARN} for 5 min)
        priority: WARNING
        description: The number of locked sessions exceeding `{$ORACLE.SESSION.LOCK.MAX.TIME}`
          seconds is too high. Long-term locks can negatively affect the database
          performance. Therefore, if they are detected, you should first find the
          most difficult queries from the database point of view and then analyze
          possible resource leaks.
        tags:
        - tag: scope
          value: performance
    - uuid: f7501a8b671d40e19ebe4819c1ce1e0c
      name: SGA, buffer cache
      type: DEPENDENT
      key: oracle.sga_buffer_cache
      delay: '0'
      history: 7d
      units: B
      description: The size of standard block cache.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Buffer_Cache')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: cache
      - tag: component
        value: sga
    - uuid: bbb177f5afbc445f80fae2ef322c5a39
      name: SGA, fixed
      type: DEPENDENT
      key: oracle.sga_fixed
      delay: '0'
      history: 7d
      units: B
      description: The fixed System Global Area (SGA) is an internal housekeeping
        area.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Fixed_Sga')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 3d63ad17edc24fc4874141c70999e8ec
      name: SGA, java pool
      type: DEPENDENT
      key: oracle.sga_java_pool
      delay: '0'
      history: 7d
      units: B
      description: The memory is allocated from the Java pool.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Java Pool')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: a70d4bd14e3442cbafc674d902ccce24
      name: SGA, large pool
      type: DEPENDENT
      key: oracle.sga_large_pool
      delay: '0'
      history: 7d
      units: B
      description: The memory is allocated from a large pool.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Large Pool')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 4a5d3234776c4713a16acf6bb229f76a
      name: SGA, log buffer
      type: DEPENDENT
      key: oracle.sga_log_buffer
      delay: '0'
      history: 7d
      units: B
      description: The number of bytes allocated for the redo log buffer.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Log_Buffer')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 9a4da15299b24737b54e38f0f7a9a17e
      name: SGA, shared pool
      type: DEPENDENT
      key: oracle.sga_shared_pool
      delay: '0'
      history: 7d
      units: B
      description: The memory is allocated from a shared pool.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SGA::Shared Pool')].VALUE.first()
        error_handler: CUSTOM_VALUE
        error_handler_params: '0'
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: sga
    - uuid: 5085e6eb634a4f9cbb1364ad7a54eebd
      name: Shared pool free %
      type: DEPENDENT
      key: oracle.shared_pool_free
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: '%'
      description: Free memory of a shared pool expressed in %.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Shared Pool Free %')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      triggers:
      - uuid: 658cae0859e943e1a04351854774255d
        expression: max(/Oracle by ODBC SDL/oracle.shared_pool_free,5m)<{$ORACLE.SHARED.FREE.MIN.WARN}
        name: Shared pool free is too low
        event_name: Shared pool free is too low (less {$ORACLE.SHARED.FREE.MIN.WARN}%
          for 5m)
        priority: WARNING
        description: The free memory percent of the shared pool has been less than
          `{$ORACLE.SHARED.FREE.MIN.WARN}`% for the last 5 minutes.
        tags:
        - tag: scope
          value: capacity
    - uuid: bbef70543b02474080c14f19e7fee99e
      name: Total sorts per user call
      type: DEPENDENT
      key: oracle.sorts_per_user_call
      delay: '0'
      history: 7d
      value_type: FLOAT
      description: The total sorts per user call.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Total Sorts Per User Call')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: e6042769754142508b5001aa4dd3d3cb
      name: Temp space used
      type: DEPENDENT
      key: oracle.temp_space_used
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: B
      description: Used temporary space.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::Temp Space Used')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: c1fa335f52504990a4fa170b768d0427
      name: PGA, Total allocated
      type: DEPENDENT
      key: oracle.total_pga_allocated
      delay: '0'
      history: 7d
      units: B
      description: The current amount of the PGA memory allocated by the instance.
        The Oracle Database attempts to keep this number below the value of the `PGA_AGGREGATE_TARGET`
        initialization parameter. However, it is possible for the PGA allocated to
        exceed that value by a small percentage and for a short period of time when
        the work area workload is increasing very rapidly or when `PGA_AGGREGATE_TARGET`
        is set to a small value.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Total Pga Allocated')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: 2661aedbb1da4c8b870033b853527e6e
      name: PGA, Total freeable
      type: DEPENDENT
      key: oracle.total_pga_freeable
      delay: '0'
      history: 7d
      units: B
      description: The number of bytes of the PGA memory in all processes that could
        be freed back to the OS.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Total Freeable Pga Memory')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: 0d412763903944648ba142a24c613d01
      name: PGA, Total inuse
      type: DEPENDENT
      key: oracle.total_pga_used
      delay: '0'
      history: 7d
      units: B
      description: The amount of Program Global Area (PGA) memory currently consumed
        by work areas. This number can be used to determine how much memory is consumed
        by other consumers of the PGA memory (for example, PL/SQL or Java).
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='PGA::Total Pga Inuse')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: memory
      - tag: component
        value: pga
    - uuid: 0698606050974cde9b7e9fb91cb51e34
      name: Uptime
      type: DEPENDENT
      key: oracle.uptime
      delay: '0'
      history: 7d
      trends: '0'
      units: s
      description: The Oracle instance uptime expressed in seconds.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..UPTIME.first()
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 1a5264b54ae249158add563c7f567494
        expression: nodata(/Oracle by ODBC SDL/oracle.uptime,5m)=1
        name: Failed to fetch info data
        event_name: Failed to fetch info data (or no data for 5m)
        priority: WARNING
        description: Zabbix has not received any data for the items for the last 5
          minutes. The database might be unavailable for connecting.
        dependencies:
        - name: Port {$ORACLE.PORT} is unavailable
          expression: max(/Oracle by ODBC SDL/net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}],#3)=0  and
            max(/Oracle by ODBC SDL/proc.num[,,,"tnslsnr LISTENER"],#3)>0
        tags:
        - tag: scope
          value: availability
      - uuid: 46df997aeec14bd08a85b5c4939a40b4
        expression: last(/Oracle by ODBC SDL/oracle.uptime)<10m
        name: Host has been restarted
        event_name: '{HOST.NAME} has been restarted (uptime < 10m)'
        priority: INFO
        description: Uptime is less than 10 minutes.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: 34a860e117394d13a87a7e24812afafe
      name: User '{$ORACLE.USER}' expire password
      type: DEPENDENT
      key: oracle.user_expire_password
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: days
      description: The number of days before the Zabbix account password expires.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='USER::Expire password')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 340d823144754413be49e043a615fffb
        expression: last(/Oracle by ODBC SDL/oracle.user_expire_password)  < {$ORACLE.EXPIRE.PASSWORD.MIN.WARN}
        name: Zabbix account will expire soon
        event_name: Zabbix account will expire soon (under {$ORACLE.EXPIRE.PASSWORD.MIN.WARN}
          days)
        priority: WARNING
        description: The password for the Zabbix user in the database expires soon.
        tags:
        - tag: scope
          value: notice
    - uuid: 1beed9e3dde145caab9b32944a6cf7ab
      name: User rollbacks per second
      type: DEPENDENT
      key: oracle.user_rollbacks_rate
      delay: '0'
      history: 7d
      value_type: FLOAT
      units: Rps
      description: The number of times that users manually issued the `ROLLBACK` statement
        or an error occurred during the users' transactions.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $[?(@.METRIC=='SYS::User Rollbacks Per Sec')].VALUE.first()
      master_item:
        key: 
          db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
    - uuid: e0d5a5b9e7514fc98212c2c4ffb4ed8a
      name: Version
      type: DEPENDENT
      key: oracle.version
      delay: '0'
      history: 7d
      value_type: CHAR
      trends: '0'
      description: The Oracle Server version.
      preprocessing:
      - type: JSONPATH
        parameters:
        - $..VERSION.first()
      - type: DISCARD_UNCHANGED_HEARTBEAT
        parameters:
        - 1d
      master_item:
        key: 
          db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: f3c4e63933a140e8890f4ffd77bf158e
        expression: last(/Oracle by ODBC SDL/oracle.version,#1)<>last(/Oracle by ODBC
          SDL/oracle.version,#2) and length(last(/Oracle by ODBC SDL/oracle.version))>0
        name: Version has changed
        event_name: 'Version has changed (new version value received: {ITEM.VALUE})'
        priority: INFO
        description: The Oracle Database version has changed. Acknowledge to close
          the problem manually.
        manual_close: YES
        tags:
        - tag: scope
          value: notice
    - uuid: a02d7bd9ea25449eb6399a0c77d6f7b4
      name: Number of LISTENER processes
      key: proc.num[,,,"tnslsnr LISTENER"]
      delay: 30s
      history: 7d
      description: The number of running listener processes.
      preprocessing:
      - type: DISCARD_UNCHANGED_HEARTBEAT
        parameters:
        - 10m
      tags:
      - tag: component
        value: application
      triggers:
      - uuid: 3ac023a542dc46739705d05909e6dd09
        expression: max(/Oracle by ODBC SDL/proc.num[,,,"tnslsnr LISTENER"],#3)=0
        name: LISTENER process is not running
        priority: DISASTER
        description: The Oracle listener process is not running.
        tags:
        - tag: scope
          value: availability
    discovery_rules:
    - uuid: 6de60a225ea04017ab6680108df5fb8f
      name: Archive log discovery
      type: DEPENDENT
      key: oracle.archivelog.discovery
      delay: '0'
      description: Used for the discovery of the log archive.
      item_prototypes:
      - uuid: 6eb360a323ae40ad9667b795753f0c67
        name: "Archivelog '{#DEST_NAME}': Get archive log info"
        type: ODBC
        key: 
          db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        delay: 5m
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT
          d.dest_name, DECODE (d.status, 'VALID',3, 'DEFERRED', 2, 'ERROR', 1, 0) AS status,
          d.log_sequence,
          d.error
          FROM v$archive_dest d , v$database db
          WHERE d.dest_name = '{#DEST_NAME}' AND d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the archive log statistics.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: archive-log
        - tag: component
          value: raw
      - uuid: c7f23495b9d843299970e544da181911
        name: "Archivelog '{#DEST_NAME}': Error"
        type: DEPENDENT
        key: oracle.archivelog_error["{#DEST_NAME}"]
        delay: '0'
        history: 7d
        value_type: TEXT
        trends: '0'
        description: Displays the error message.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.ERROR
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 1h
        master_item:
          key: 
            db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: archive-log
        - tag: destination
          value: '{#DEST_NAME}'
      - uuid: 592bc86224dd4e7780e0cf4ff137b728
        name: "Archivelog '{#DEST_NAME}': Last sequence"
        type: DEPENDENT
        key: oracle.archivelog_log_sequence["{#DEST_NAME}"]
        delay: '0'
        history: 7d
        description: Identifies the sequence number of the last archived redo log
          to be archived.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.LOG_SEQUENCE
        master_item:
          key: 
            db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: archive-log
        - tag: destination
          value: '{#DEST_NAME}'
      - uuid: 2689661198844ae1acd9e5e89c93fb9e
        name: "Archivelog '{#DEST_NAME}': Status"
        type: DEPENDENT
        key: oracle.archivelog_log_status["{#DEST_NAME}"]
        delay: '0'
        history: 7d
        description: |
          Identifies the current status of the destination where:
          1 - VALID;
          2 - DEFERRED;
          3 - ERROR;
          0 - UNKNOWN.
        valuemap:
          name: Oracle Archivelog status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.STATUS
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 1h
        master_item:
          key: 
            db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: archive-log
        - tag: destination
          value: '{#DEST_NAME}'
        trigger_prototypes:
        - uuid: a8773050e1a84b4fa716b1532b0bae18
          expression: last(/Oracle by ODBC SDL/oracle.archivelog_log_status["{#DEST_NAME}"])<2
          name: "Archivelog '{#DEST_NAME}': Log Archive is not valid"
          priority: HIGH
          description: |
            The trigger will launch if the archive log destination is not in one of these states:
            2 - DEFERRED;
            3 - VALID.
          tags:
          - tag: scope
            value: availability
      master_item:
        key: 
          db.odbc.get[get_archivelog,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DEST_NAME}'
        path: $.DEST_NAME
    - uuid: 00c1037276254448a26b8947cd581afa
      name: ASM disk groups discovery
      type: DEPENDENT
      key: oracle.asm.discovery
      delay: '0'
      description: Used for discovering the ASM disk groups.
      item_prototypes:
      - uuid: 4d3e506f850348bb9487e8df32fa54c7
        name: "ASM '{#DGNAME}': Get ASM stats"
        type: ODBC
        key: 
          db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT
          name AS dgname,
          ROUND(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)*1024*1024) AS size_byte,
          ROUND(usable_file_mb*1024*1024 ) AS free_size_byte,
          ROUND(100-(usable_file_mb /(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)))* 100, 2) AS used_percent
          FROM v$asm_diskgroup
          WHERE name = '{#DGNAME}';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the ASM disk group statistics.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: asm
        - tag: component
          value: raw
      - uuid: 9727691d80c14cf9826a13c1991b316a
        name: "ASM '{#DGNAME}': Free size"
        type: DEPENDENT
        key: oracle.asm_free_size["{#DGNAME}"]
        delay: '0'
        history: 7d
        units: B
        description: The free size of the ASM disk group.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FREE_SIZE_BYTE
        master_item:
          key: 
            db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: asm
        - tag: disk-group
          value: '{#DGNAME}'
      - uuid: bad13e493db44be984c7e7a8d4294ef5
        name: "ASM '{#DGNAME}': Total size"
        type: DEPENDENT
        key: oracle.asm_total_size["{#DGNAME}"]
        delay: '0'
        history: 7d
        units: B
        description: The total size of the ASM disk group.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.SIZE_BYTE
        master_item:
          key: 
            db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: asm
        - tag: disk-group
          value: '{#DGNAME}'
      - uuid: f876c52e137548839770f7a98b7fcd17
        name: "ASM '{#DGNAME}': Used size, percent"
        type: DEPENDENT
        key: oracle.asm_used_pct["{#DGNAME}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Usage of the ASM disk group expressed in %.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_PERCENT
        master_item:
          key: 
            db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: asm
        - tag: disk-group
          value: '{#DGNAME}'
        trigger_prototypes:
        - uuid: b1c9f5f771f743d0b2285c8a4751b605
          expression: min(/Oracle by ODBC SDL/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}
          name: "ASM '{#DGNAME}': Disk group usage is too high"
          event_name: "ASM '{#DGNAME}': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.HIGH}%
            for 5m)"
          priority: HIGH
          description: The usage of the ASM disk group expressed in % exceeds `{$ORACLE.ASM.USED.PCT.MAX.WARN}`.
          tags:
          - tag: scope
            value: capacity
        - uuid: 7533f4c8832641c7ae44d05c63dae1f6
          expression: min(/Oracle by ODBC SDL/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.WARN}
          name: "ASM '{#DGNAME}': Disk group usage is too high"
          event_name: "ASM '{#DGNAME}': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.WARN}%
            for 5m)"
          priority: WARNING
          description: The usage of the ASM disk group expressed in % exceeds `{$ORACLE.ASM.USED.PCT.MAX.WARN}`.
          dependencies:
          - name: "ASM '{#DGNAME}': Disk group usage is too high"
            expression: min(/Oracle by ODBC SDL/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      graph_prototypes:
      - uuid: 0a61b07cd21e44bb83670b151670d44a
        name: "ASM '{#DGNAME}': ASM disk group '{#DGNAME}'"
        graph_items:
        - color: 199C0D
          item:
            host: Oracle by ODBC SDL
            key: oracle.asm_free_size["{#DGNAME}"]
        - sortorder: '1'
          color: F63100
          item:
            host: Oracle by ODBC SDL
            key: oracle.asm_total_size["{#DGNAME}"]
      master_item:
        key: 
          db.odbc.get[get_asm,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DGNAME}'
        path: $.DGNAME
    - uuid: 9ebd82f9d33a4e10b529c602a6b30e76
      name: Database discovery
      type: DEPENDENT
      key: oracle.db.discovery
      delay: '0'
      filter:
        evaltype: AND
        conditions:
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.MATCHES}'
          formulaid: A
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: B
      description: Used for database discovery.
      item_prototypes:
      - uuid: 4d61f70a9ded42b38bc3aa0dc6d57102
        name: "Oracle Database '{#DBNAME}': Get CDB and No-CDB info"
        type: ODBC
        key: 
          db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT name as DBNAME,
          DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode,
          DECODE(database_role, 'SNAPSHOT STANDBY', 1, 'LOGICAL STANDBY', 2, 'PHYSICAL STANDBY', 3, 'PRIMARY', 4, 'FAR SYNC', 5, 0) AS ROLE,
          DECODE(force_logging, 'YES',1,'NO',0,0) AS force_logging,
          DECODE(log_mode, 'MANUAL',2 ,'ARCHIVELOG',1,'NOARCHIVELOG',0,0) AS log_mode
          FROM v$database
          WHERE name = '{#DBNAME}';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the information about the CDB and non-CDB database on an
          instance.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: cdb
        - tag: component
          value: raw
      - uuid: 694e873ca66f40e5ba8965a8a50bfb44
        name: "Oracle Database '{#DBNAME}': Force logging"
        type: DEPENDENT
        key: oracle.db_force_logging["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: Indicates whether the database is under force logging mode (`YES`/`NO`).
        valuemap:
          name: Oracle force log status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FORCE_LOGGING
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
      - uuid: a7b187ddb85d4d32ae6a567c55965a0c
        name: "Oracle Database '{#DBNAME}': Log mode"
        type: DEPENDENT
        key: oracle.db_log_mode["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          The archive log mode where:
          0 - NOARCHIVELOG;
          1 - ARCHIVELOG;
          2 - MANUAL.
        valuemap:
          name: Oracle log mode
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.LOG_MODE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
      - uuid: 9bf9ae2a5d594b00b52151d15ea5974c
        name: "Oracle Database '{#DBNAME}': Open status"
        type: DEPENDENT
        key: oracle.db_open_mode["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          1 - MOUNTED;
          2 - READ WRITE;
          3 - READ ONLY;
          4 - READ ONLY WITH APPLY (a physical standby database is open in real-time query mode).
        valuemap:
          name: Oracle DB open status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.OPEN_MODE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
        trigger_prototypes:
        - uuid: 3b4312e198954447b90b018ef47bebb7
          expression: last(/Oracle by ODBC SDL/oracle.db_open_mode["{#DBNAME}"],#1)<>last(/Oracle
            by ODBC SDL/oracle.db_open_mode["{#DBNAME}"],#2)
          name: "Oracle Database '{#DBNAME}': Open status has changed"
          event_name: "Oracle Database '{#DBNAME}': Open status has changed (new value
            received: {ITEM.VALUE})"
          priority: INFO
          description: The Oracle Database open status has changed. Acknowledge to
            close the problem manually.
          manual_close: YES
          dependencies:
          - name: "Oracle Database '{#DBNAME}': Open status in mount mode"
            expression: last(/Oracle by ODBC SDL/oracle.db_open_mode["{#DBNAME}"])=1
          tags:
          - tag: scope
            value: notice
        - uuid: f26e3a8fc7794d5ab5b810dd5428c6a1
          expression: last(/Oracle by ODBC SDL/oracle.db_open_mode["{#DBNAME}"])=1
          name: "Oracle Database '{#DBNAME}': Open status in mount mode"
          priority: WARNING
          description: The Oracle Database is in a mounted state.
          tags:
          - tag: scope
            value: notice
      - uuid: 02b71c8c8cc24af98b54f4728c4232b6
        name: "Oracle Database '{#DBNAME}': Role"
        type: DEPENDENT
        key: oracle.db_role["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          The current role of the database where:
          1 - SNAPSHOT STANDBY;
          2 - LOGICAL STANDBY;
          3 - PHYSICAL STANDBY;
          4 - PRIMARY;
          5 - FAR SYNC.
        valuemap:
          name: Oracle DB role
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.ROLE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: '{#TYPE}'
        trigger_prototypes:
        - uuid: dde504b8a32f4bd587dab33c136e8a56
          expression: last(/Oracle by ODBC SDL/oracle.db_role["{#DBNAME}"],#1)<>last(/Oracle
            by ODBC SDL/oracle.db_role["{#DBNAME}"],#2)
          name: "Oracle Database '{#DBNAME}': Role has changed"
          event_name: "Oracle Database '{#DBNAME}': Role has changed (new value received:
            {ITEM.VALUE})"
          priority: INFO
          description: The Oracle Database role has changed. Acknowledge to close
            the problem manually.
          manual_close: YES
          tags:
          - tag: scope
            value: notice
      trigger_prototypes:
      - uuid: 08727a5c6d684958994ba758278cd8a2
        expression: last(/Oracle by ODBC SDL/oracle.db_force_logging["{#DBNAME}"])
          = 0 and last(/Oracle by ODBC SDL/oracle.db_log_mode["{#DBNAME}"]) = 1
        name: "Oracle Database '{#DBNAME}': Force logging is deactivated for DB with
          active Archivelog"
        priority: WARNING
        description: Force logging mode is a very important metric for databases in
          `ARCHIVELOG`. This feature allows to forcibly write all the transactions
          to the redo log.
        tags:
        - tag: scope
          value: performance
      master_item:
        key: 
          db.odbc.get[get_db,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DBNAME}'
        path: $.DBNAME
      - lld_macro: '{#TYPE}'
        path: $.TYPE
    - uuid: f9beb762dd1d40acaef051862fa51105
      name: PDB discovery
      type: DEPENDENT
      key: oracle.pdb.discovery
      delay: '0'
      filter:
        evaltype: AND
        conditions:
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.MATCHES}'
          formulaid: A
        - macro: '{#DBNAME}'
          value: '{$ORACLE.DBNAME.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: B
      description: Used for the discovery of the pluggable database (PDB).
      item_prototypes:
      - uuid: c6ce58d326c440a4ba19fe409139d9c6
        name: "Oracle Database '{#DBNAME}': Get PDB info"
        type: ODBC
        key: 
          db.odbc.get[get_pdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT
          name as DBNAME,
          DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode
          FROM v$pdbs
          WHERE name = '{#DBNAME}';
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the information about the PDB database on an instance.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: pdb
        - tag: component
          value: raw
      - uuid: 3db0b3538db945e59ed9310532f62f1d
        name: "Oracle Database '{#DBNAME}': Open status"
        type: DEPENDENT
        key: oracle.pdb_open_mode["{#DBNAME}"]
        delay: '0'
        history: 7d
        description: |
          1 - MOUNTED;
          2 - READ WRITE;
          3 - READ ONLY;
          4 - READ ONLY WITH APPLY (a physical standby database is open in real-time query mode).
        valuemap:
          name: Oracle DB open status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.OPEN_MODE
        - type: DISCARD_UNCHANGED_HEARTBEAT
          parameters:
          - 15m
        master_item:
          key: 
            db.odbc.get[get_pdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: database
        - tag: database
          value: '{#DBNAME}'
        - tag: type
          value: pdb
        trigger_prototypes:
        - uuid: 8e4d5515263e4df0a2c43ba99b2619d2
          expression: last(/Oracle by ODBC SDL/oracle.pdb_open_mode["{#DBNAME}"],#1)<>last(/Oracle
            by ODBC SDL/oracle.pdb_open_mode["{#DBNAME}"],#2)
          name: "Oracle Database '{#DBNAME}': Open status has changed"
          event_name: "Oracle Database '{#DBNAME}': Open status has changed (new value
            received: {ITEM.VALUE})"
          priority: INFO
          description: The Oracle Database open status has changed. Acknowledge to
            close the problem manually.
          manual_close: YES
          tags:
          - tag: scope
            value: notice
        - uuid: 7858c0c07b4e4173a9f45f3adf273ea6
          expression: last(/Oracle by ODBC SDL/oracle.pdb_open_mode["{#DBNAME}"])=1
          name: "Oracle Database '{#DBNAME}': Open status in mount mode"
          priority: WARNING
          description: The Oracle Database is in a mounted state.
          tags:
          - tag: scope
            value: notice
      master_item:
        key: 
          db.odbc.get[get_pdb,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#DBNAME}'
        path: $.DBNAME
    - uuid: cbae90a0b0aa4feba95770c77f5331db
      name: Tablespace discovery
      type: DEPENDENT
      key: oracle.tablespace.discovery
      delay: '0'
      filter:
        evaltype: AND
        conditions:
        - macro: '{#CON_NAME}'
          value: '{$ORACLE.TABLESPACE.CONTAINER.MATCHES}'
          formulaid: A
        - macro: '{#CON_NAME}'
          value: '{$ORACLE.TABLESPACE.CONTAINER.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: B
        - macro: '{#TABLESPACE}'
          value: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
          formulaid: C
        - macro: '{#TABLESPACE}'
          value: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
          operator: NOT_MATCHES_REGEX
          formulaid: D
      description: Used for the discovery of tablespaces in DBMS.
      item_prototypes:
      - uuid: d0b1e0e3fa7641f0a6492985840aae51
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Get tablespaces stats"
        type: ODBC
        key: 
          db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        history: '0'
        value_type: TEXT
        trends: '0'
        params: |
          SELECT df.CON_NAME,
                 df.TABLESPACE_NAME                  AS TABLESPACE,
                 df.CONTENTS                         AS TYPE,
                 NVL(SUM(df.BYTES), 0)               AS FILE_BYTES,
                 NVL(SUM(df.MAX_BYTES), 0)           AS MAX_BYTES,
                 NVL(SUM(f.FREE), 0)                 AS FREE_BYTES,
                 NVL(SUM(df.BYTES) - SUM(f.FREE), 0) AS USED_BYTES,
                 ROUND(CASE SUM(df.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE (SUM(df.BYTES) / SUM(df.MAX_BYTES) * 100)
                           END, 2)                   AS USED_PCT_MAX,
                 ROUND(CASE SUM(df.BYTES)
                           WHEN 0 THEN 0
                           ELSE (NVL(SUM(df.BYTES) - SUM(f.FREE), 0)) / SUM(df.BYTES) * 100
                           END, 2)                   AS USED_FILE_PCT,
                 ROUND(CASE SUM(df.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE NVL(SUM(df.BYTES) - SUM(f.FREE), 0) / SUM(df.MAX_BYTES) * 100
                           END, 2)                   AS USED_FROM_MAX_PCT,
                 CASE df.STATUS
                     WHEN 'ONLINE' THEN 1
                     WHEN 'OFFLINE' THEN 2
                     WHEN 'READ ONLY' THEN 3
                     ELSE 0
                     END                             AS STATUS
          FROM (SELECT ct.CON$NAME                              AS CON_NAME,
                       cdf.FILE_ID,
                       ct.CONTENTS,
                       ct.STATUS,
                       cdf.FILE_NAME,
                       cdf.TABLESPACE_NAME,
                       TRUNC(cdf.BYTES)                         AS BYTES,
                       TRUNC(GREATEST(cdf.BYTES, cdf.MAXBYTES)) AS MAX_BYTES
                FROM CDB_DATA_FILES cdf,
                     CDB_TABLESPACES ct
                WHERE cdf.TABLESPACE_NAME = ct.TABLESPACE_NAME
                  AND cdf.CON_ID = ct.CON_ID
                  AND ((ct.CON$NAME = '{#CON_NAME}') or (ct.CON$NAME is null and ct.CON_ID = 0))
                  AND cdf.TABLESPACE_NAME = '{#TABLESPACE}'
                  AND ct.CONTENTS = '{#CONTENTS}') df,
               (SELECT TRUNC(SUM(BYTES)) AS FREE,
                       FILE_ID
                FROM CDB_FREE_SPACE
                GROUP BY FILE_ID) f
          WHERE df.FILE_ID = f.FILE_ID (+)
          GROUP BY df.CON_NAME,
                   df.TABLESPACE_NAME,
                   df.CONTENTS,
                   df.STATUS
          UNION ALL
          SELECT Y.CON_NAME,
                 Y.NAME                                   AS TABLESPACE,
                 Y.CONTENTS                               AS TYPE,
                 NVL(SUM(Y.BYTES), 0)                     AS FILE_BYTES,
                 NVL(SUM(Y.MAX_BYTES), 0)                 AS MAX_BYTES,
                 NVL(MAX(NVL(Y.FREE_BYTES, 0)), 0)        AS FREE_BYTES,
                 NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0) AS USED_BYTES,
                 ROUND(CASE SUM(Y.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE (SUM(Y.BYTES) / SUM(Y.MAX_BYTES) * 100)
                           END, 2)                                    AS USED_PCT_MAX,
                 ROUND(CASE SUM(Y.BYTES)
                           WHEN 0 THEN 0
                           ELSE (NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0)) / SUM(Y.BYTES) * 100
                           END, 2)                                    AS USED_FILE_PCT,
                 ROUND(CASE SUM(Y.MAX_BYTES)
                           WHEN 0 THEN 0
                           ELSE (NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0)) / SUM(Y.MAX_BYTES) * 100
                           END, 2)                                    AS USED_FROM_MAX_PCT,
                 CASE Y.STATUS
                     WHEN 'ONLINE' THEN 1
                     WHEN 'OFFLINE' THEN 2
                     WHEN 'READ ONLY' THEN 3
                     ELSE 0
                     END                                  AS STATUS
          FROM (SELECT ct.CON$NAME                  AS CON_NAME,
                       ctf.TABLESPACE_NAME          AS NAME,
                       ct.CONTENTS,
                       ctf.STATUS                   AS STATUS,
                       ctf.BYTES                    AS BYTES,
                       (SELECT ((f.TOTAL_BLOCKS - s.TOT_USED_BLOCKS) * vp.VALUE)
                        FROM (SELECT CON_ID,
                                     TABLESPACE_NAME,
                                     SUM(USED_BLOCKS) TOT_USED_BLOCKS
                              FROM V$SORT_SEGMENT
                              WHERE TABLESPACE_NAME != 'DUMMY'
                              GROUP BY CON_ID,
                                       TABLESPACE_NAME) s,
                             (SELECT CON_ID,
                                     TABLESPACE_NAME,
                                     SUM(BLOCKS) TOTAL_BLOCKS
                              FROM CDB_TEMP_FILES
                              WHERE TABLESPACE_NAME != 'DUMMY'
                              GROUP BY CON_ID,
                                       TABLESPACE_NAME) f,
                             (SELECT VALUE
                              FROM V$PARAMETER
                              WHERE NAME = 'db_block_size') vp
                        WHERE f.TABLESPACE_NAME = s.TABLESPACE_NAME
                          AND f.TABLESPACE_NAME = ctf.TABLESPACE_NAME
                          AND f.CON_ID = s.CON_ID
                          AND f.CON_ID = ct.CON_ID) AS FREE_BYTES,
                       CASE
                           WHEN ctf.MAXBYTES = 0 THEN ctf.BYTES
                           ELSE ctf.MAXBYTES
                           END                      AS MAX_BYTES
                FROM CDB_TEMP_FILES ctf,
                     CDB_TABLESPACES ct
                WHERE ctf.TABLESPACE_NAME = ct.TABLESPACE_NAME
                  AND ctf.CON_ID = ct.CON_ID
                  AND ((ct.CON$NAME = '{#CON_NAME}') or (ct.CON$NAME is null and ct.CON_ID = 0))
                  AND ctf.TABLESPACE_NAME = '{#TABLESPACE}'
                  AND ct.CONTENTS = '{#CONTENTS}') Y
          GROUP BY Y.CON_NAME,
                   Y.NAME,
                   Y.CONTENTS,
                   Y.STATUS;
        username: '{$ORACLE.USER}'
        password: '{$ORACLE.PASSWORD}'
        description: Gets the statistics of the tablespace.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.first()
          error_handler: DISCARD_VALUE
        tags:
        - tag: component
          value: raw
        - tag: component
          value: tablespaces
      - uuid: 09782dec7ad548f4a48189d30e0ebed7
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace allocated, bytes"
        type: DEPENDENT
        key: oracle.tbs_alloc_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: Currently allocated bytes for the tablespace (sum of the current
          size of datafiles).
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FILE_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: 529bd0e698fb4ecf802d3eaef8073c14
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace free, bytes"
        type: DEPENDENT
        key: oracle.tbs_free_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: Free bytes of the allocated space.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.FREE_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: c92eb73e348b467ab47fe65767799106
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace MAX size, bytes"
        type: DEPENDENT
        key: oracle.tbs_max_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: The maximum size of the tablespace.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.MAX_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: c7b7d07c776d489886d2303f89b05e87
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Open status"
        type: DEPENDENT
        key: oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        description: |
          The tablespace status where:
          1 - ONLINE;
          2 - OFFLINE;
          3 - READ ONLY.
        valuemap:
          name: Oracle tablespace status
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.STATUS
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: a72c26c5cda644c7ac9c99d65e4af8b0
          expression: last(/Oracle by ODBC SDL/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"])=2
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace is OFFLINE"
          priority: WARNING
          description: The tablespace is in the offline state.
          tags:
          - tag: scope
            value: availability
        - uuid: 96c3c51ebb29482d888417dd9d59e320
          expression: last(/Oracle by ODBC SDL/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"],#1)<>last(/Oracle
            by ODBC SDL/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"],#2)
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace status has changed"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace status
            has changed (new value received: {ITEM.VALUE})"
          priority: INFO
          description: Oracle tablespace status has changed. Acknowledge to close
            the problem manually.
          manual_close: YES
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace is OFFLINE"
            expression: last(/Oracle by ODBC SDL/oracle.tbs_status["{#CON_NAME}","{#TABLESPACE}"])=2
          tags:
          - tag: scope
            value: capacity
      - uuid: 06069925804a4b7db931ffc05a1a8c9b
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace used, bytes"
        type: DEPENDENT
        key: oracle.tbs_used_bytes["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        units: B
        description: Currently used bytes for the tablespace (current size of datafiles
          minus the free space).
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_BYTES
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
      - uuid: 51e29c748ba04bd7b7093b22f493d12d
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage, percent"
        type: DEPENDENT
        key: oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Used bytes/allocated bytes*100.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_FILE_PCT
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: 27edc81c537a4428afe4202894fcb9f0
          expression: min(/Oracle by ODBC 
            SDL/oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage is too
            high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            is too high (over {$ORACLE.TBS.USED.PCT.MAX.HIGH}% for 5m)."
          priority: HIGH
          description: The usage of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.USED.PCT.MAX.HIGH}`%
          tags:
          - tag: scope
            value: capacity
        - uuid: b9832f05a2f441c697af09a206a5ad52
          expression: min(/Oracle by ODBC 
            SDL/oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.WARN}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage is too
            high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            is too high (over {$ORACLE.TBS.USED.PCT.MAX.WARN}% for 5m)."
          priority: WARNING
          description: The usage of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.USED.PCT.MAX.WARN}`%
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage is too
              high"
            expression: min(/Oracle by ODBC 
              SDL/oracle.tbs_used_file_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      - uuid: 3601e428d3f74b75b5f5162b67332392
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from MAX,
          percent"
        type: DEPENDENT
        key: oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Used bytes/max bytes*100.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_FROM_MAX_PCT
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: 0159755992414a6b87d063b80f15972e
          expression: min(/Oracle by ODBC 
            SDL/oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from MAX
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            from MAX is too high (over {$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}% for 5m)."
          priority: HIGH
          description: The usage of the tablespace `{#TABLESPACE}` from MAX exceeds
            `{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}`%
          tags:
          - tag: scope
            value: capacity
        - uuid: 2fd18c4c19f94359b74bc878afb7b2f6
          expression: min(/Oracle by ODBC 
            SDL/oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from MAX
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage
            from MAX is too high (over {$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}% for 5m)."
          priority: WARNING
          description: The usage of the tablespace `{#TABLESPACE}` from MAX exceeds
            `{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}`%
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace usage from
              MAX is too high"
            expression: min(/Oracle by ODBC 
              SDL/oracle.tbs_used_from_max_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      - uuid: 0efb5528bb7f4e92aba3b023e5a7ca29
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace allocated, percent"
        type: DEPENDENT
        key: oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"]
        delay: '0'
        history: 7d
        value_type: FLOAT
        units: '%'
        description: Allocated bytes/max bytes*100.
        preprocessing:
        - type: JSONPATH
          parameters:
          - $.USED_PCT_MAX
        master_item:
          key: 
            db.odbc.get[get_{#CON_NAME}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
        tags:
        - tag: component
          value: tablespaces
        - tag: contents
          value: '{#CONTENTS}'
        - tag: database
          value: '{#CON_NAME}'
        - tag: tablespace
          value: '{#TABLESPACE}'
        trigger_prototypes:
        - uuid: a162af54d199442db2e97bb2dd293369
          expression: min(/Oracle by ODBC 
            SDL/oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high (over {$ORACLE.TBS.UTIL.PCT.MAX.HIGH}% for 5m)."
          priority: HIGH
          description: The utilization of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}`%
          tags:
          - tag: scope
            value: capacity
        - uuid: 6d0db18ca1ac42bf8e9aab3194c77710
          expression: min(/Oracle by ODBC 
            SDL/oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.WARN}
          name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high"
          event_name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
            is too high (over {$ORACLE.TBS.UTIL.PCT.MAX.WARN}% for 5m)."
          priority: WARNING
          description: The utilization of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.UTIL.PCT.MAX.WARN}`%
          dependencies:
          - name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace utilization
              is too high"
            expression: min(/Oracle by ODBC 
              SDL/oracle.tbs_used_pct["{#CON_NAME}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}
          tags:
          - tag: scope
            value: capacity
      graph_prototypes:
      - uuid: 0df2d5a9681e4f41abe8cb7a2e82bb7f
        name: "Oracle '{#CON_NAME}' TBS '{#TABLESPACE}': Tablespace '{#TABLESPACE}'"
        graph_items:
        - color: 199C0D
          item:
            host: Oracle by ODBC SDL
            key: oracle.tbs_alloc_bytes["{#CON_NAME}","{#TABLESPACE}"]
        - sortorder: '1'
          color: F63100
          item:
            host: Oracle by ODBC SDL
            key: oracle.tbs_max_bytes["{#CON_NAME}","{#TABLESPACE}"]
        - sortorder: '2'
          color: 00611C
          item:
            host: Oracle by ODBC SDL
            key: oracle.tbs_used_bytes["{#CON_NAME}","{#TABLESPACE}"]
      master_item:
        key: 
          db.odbc.get[get_tablespace,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]
      lld_macro_paths:
      - lld_macro: '{#CONTENTS}'
        path: $.CONTENTS
      - lld_macro: '{#CON_NAME}'
        path: $.CON_NAME
      - lld_macro: '{#TABLESPACE}'
        path: $.TABLESPACE
    tags:
    - tag: class
      value: database
    - tag: target
      value: oracle
    macros:
    - macro: '{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
      value: '95'
      description: The maximum percentage of used space in the Automatic Storage Management
        (ASM) disk group for the High trigger expression.
    - macro: '{$ORACLE.ASM.USED.PCT.MAX.WARN}'
      value: '90'
      description: The maximum percentage of used space in the Automatic Storage Management
        (ASM) disk group for the Warning trigger expression.
    - macro: '{$ORACLE.CONCURRENCY.MAX.WARN}'
      value: '80'
      description: The maximum percentage of session concurrency for the Warning trigger
        expression.
    - macro: '{$ORACLE.DB.FILE.MAX.WARN}'
      value: '80'
      description: The maximum percentage of used database files for the Warning trigger
        expression.
    - macro: '{$ORACLE.DBNAME.MATCHES}'
      value: .*
      description: Used in database discovery. It can be overridden on the host or
        linked template level.
    - macro: '{$ORACLE.DBNAME.NOT_MATCHES}'
      value: PDB\$SEED
      description: Used in database discovery. It can be overridden on the host or
        linked template level.
    - macro: '{$ORACLE.DRIVER}'
      value: <Put path to oracle driver here>
      description: 'Oracle driver path. For example: `/usr/lib/oracle/21/client64/lib/libsqora.so.21.1`'
    - macro: '{$ORACLE.EXPIRE.PASSWORD.MIN.WARN}'
      value: '7'
      description: The number of days before the password expires for the Warning
        trigger expression.
    - macro: '{$ORACLE.HOST}'
      value: 172.28.2.212
      description: The hostname or IP address of the Oracle DB instance.
    - macro: '{$ORACLE.PASSWORD}'
      value: zabbixORA123
      description: Oracle user's password.
    - macro: '{$ORACLE.PGA.USE.MAX.WARN}'
      value: '90'
      description: Alert threshold for the maximum percentage of the Program Global
        Area (PGA) usage for the Warning trigger expression.
    - macro: '{$ORACLE.PORT}'
      value: '1521'
      description: Oracle Database TCP port.
    - macro: '{$ORACLE.PROCESSES.MAX.WARN}'
      value: '80'
      description: Alert threshold for the maximum percentage of active processes
        for the Warning trigger expression.
    - macro: '{$ORACLE.REDO.MIN.WARN}'
      value: '3'
      description: Alert threshold for the minimum number of redo logs for the Warning
        trigger expression.
    - macro: '{$ORACLE.SERVICE}'
      value: sdl
      description: Oracle Service Name.
    - macro: '{$ORACLE.SESSION.LOCK.MAX.TIME}'
      value: '600'
      description: The maximum duration of the session lock in seconds to count the
        session as a prolongedly locked query.
    - macro: '{$ORACLE.SESSION.LONG.LOCK.MAX.WARN}'
      value: '3'
      description: Alert threshold for the maximum number of the prolongedly locked
        sessions for the Warning trigger expression.
    - macro: '{$ORACLE.SESSIONS.LOCK.MAX.WARN}'
      value: '20'
      description: Alert threshold for the maximum percentage of locked sessions for
        the Warning trigger expression.
    - macro: '{$ORACLE.SESSIONS.MAX.WARN}'
      value: '80'
      description: Alert threshold for the maximum percentage of active sessions for
        the Warning trigger expression.
    - macro: '{$ORACLE.SHARED.FREE.MIN.WARN}'
      value: '5'
      description: Alert threshold for the minimum percentage of free shared pool
        for the Warning trigger expression.
    - macro: '{$ORACLE.TABLESPACE.CONTAINER.MATCHES}'
      value: .*
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TABLESPACE.CONTAINER.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
      value: .*
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
      value: CHANGE_IF_NEEDED
      description: Used in tablespace discovery. It can be overridden on the host
        or linked template level.
    - macro: '{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}'
      value: '95'
      description: High severity alert threshold for the maximum percentage of tablespace
        usage (used bytes/max bytes) for the High trigger expression.
    - macro: '{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}'
      value: '90'
      description: Warning severity alert threshold for the maximum percentage of
        tablespace usage from maximum tablespace size (used bytes/max bytes) for the
        Warning trigger expression.
    - macro: '{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
      value: '95'
      description: High severity alert threshold for the maximum percentage of tablespace
        usage (used bytes/allocated bytes) for the High trigger expression.
    - macro: '{$ORACLE.TBS.USED.PCT.MAX.WARN}'
      value: '90'
      description: Warning severity alert threshold for the maximum percentage of
        tablespace usage (used bytes/allocated bytes) for the Warning trigger expression.
    - macro: '{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}'
      value: '90'
      description: High severity alert threshold for the maximum percentage of tablespace
        utilization (allocated bytes/max bytes) for the High trigger expression.
    - macro: '{$ORACLE.TBS.UTIL.PCT.MAX.WARN}'
      value: '80'
      description: Warning severity alert threshold for the maximum percentage of
        tablespace utilization (allocated bytes/max bytes) for the High trigger expression.
    - macro: '{$ORACLE.USER}'
      value: c##zabbix_mon
      description: Oracle username.
    dashboards:
    - uuid: 27cfc3017f6f44d1a056ce11f18b48b5
      name: Oracle Performance
      pages:
      - widgets:
        - type: graph
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Cache Hit Ratios'
          - type: STRING
            name: reference
            value: AAAAA
        - type: graph
          y: '5'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Physical Read\Write Rate'
          - type: STRING
            name: reference
            value: AAAAC
        - type: graph
          y: '10'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Datafiles'
          - type: STRING
            name: reference
            value: AAAAE
        - type: graph
          y: '15'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Processes'
          - type: STRING
            name: reference
            value: AAAAG
        - type: graph
          y: '20'
          width: '72'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: SGA Memory Usage'
          - type: STRING
            name: reference
            value: AAAAI
        - type: graph
          x: '36'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Sort Operations'
          - type: STRING
            name: reference
            value: AAAAB
        - type: graph
          x: '36'
          y: '5'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Physical Read\Write Rate, Bytes'
          - type: STRING
            name: reference
            value: AAAAD
        - type: graph
          x: '36'
          y: '10'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: PGA'
          - type: STRING
            name: reference
            value: AAAAF
        - type: graph
          x: '36'
          y: '15'
          width: '36'
          height: '5'
          fields:
          - type: GRAPH
            name: graphid.0
            value:
              host: Oracle by ODBC SDL
              name: 'Oracle: Sessions'
          - type: STRING
            name: reference
            value: AAAAH
    valuemaps:
    - uuid: cb16aafe6eb244acbfff788792de5092
      name: Oracle Archivelog status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Error
      - value: '2'
        newvalue: Deferred
      - value: '3'
        newvalue: Valid
    - uuid: 5741c08139d24e5bb533216510f96ea1
      name: Oracle archiver state
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Stopped
      - value: '2'
        newvalue: Started
      - value: '3'
        newvalue: Failed
    - uuid: 24dfca1121cb4a9fa3b4a18a27746636
      name: Oracle DB open status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Mounted
      - value: '2'
        newvalue: Read Only
      - value: '3'
        newvalue: Read-Write
      - value: '4'
        newvalue: Read Only with Apply
    - uuid: 6638ff32ec464db68697392de157a16c
      name: Oracle DB role
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Snapshot standby
      - value: '2'
        newvalue: Logical standby
      - value: '3'
        newvalue: Physical standby
      - value: '4'
        newvalue: Primary
      - value: '5'
        newvalue: Far sync
    - uuid: 5eb9f2d3e615410e9c0283c17315d3eb
      name: Oracle force log status
      mappings:
      - value: '0'
        newvalue: No
      - value: '1'
        newvalue: Yes
    - uuid: f60b9362d6fa4a87a4fc2b046ad5be71
      name: Oracle instance role
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Primary
      - value: '2'
        newvalue: Secondary
    - uuid: 985b5daac5d34c72aa71abd886691e45
      name: Oracle instance status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Started
      - value: '2'
        newvalue: Mounted
      - value: '3'
        newvalue: Open
      - value: '4'
        newvalue: Open migrate
    - uuid: 02d03666eba146469ff23a569848efc4
      name: Oracle log mode
      mappings:
      - value: '0'
        newvalue: NOARCHIVELOG
      - value: '1'
        newvalue: ARCHIVELOG
      - value: '2'
        newvalue: MANUAL
    - uuid: 692416fa96944e5188a3725d6ddd970c
      name: Oracle tablespace status
      mappings:
      - value: '0'
        newvalue: Unknown
      - value: '1'
        newvalue: Online
      - value: '2'
        newvalue: Offline
      - value: '3'
        newvalue: Read-Only
    - uuid: 471cdcfdfdfe40c8b821fbdcc88129d3
      name: Service state
      mappings:
      - value: '0'
        newvalue: Down
      - value: '1'
        newvalue: Up
  triggers:
  - uuid: f492457e0633425fb73459882157537c
    expression: max(/Oracle by ODBC SDL/net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}],#3)=0  and
      max(/Oracle by ODBC SDL/proc.num[,,,"tnslsnr LISTENER"],#3)>0
    name: Port {$ORACLE.PORT} is unavailable
    priority: DISASTER
    description: The TCP port of the Oracle Server service is currently unavailable.
    tags:
    - tag: scope
      value: availability
  - uuid: 9904945cfaf94a87a1ce13e23f32b624
    expression: min(/Oracle by ODBC SDL/oracle.processes_count,5m) * 100 / last(/Oracle
      by ODBC SDL/oracle.processes_limit) > {$ORACLE.PROCESSES.MAX.WARN}
    name: Too many active processes
    event_name: Too many active processes (over {$ORACLE.PROCESSES.MAX.WARN}% for
      5 min)
    priority: WARNING
    description: Active processes are using more than `{$ORACLE.PROCESSES.MAX.WARN}`%
      of the available number of processes.
    tags:
    - tag: scope
      value: capacity
  - uuid: 9fc7654a174545e48c6af5b2e1c5a0c4
    expression: min(/Oracle by ODBC SDL/oracle.session_count,5m) * 100 / last(/Oracle
      by ODBC SDL/oracle.session_limit) > {$ORACLE.SESSIONS.MAX.WARN}
    name: Too many active sessions
    event_name: Too many active sessions (over {$ORACLE.SESSIONS.MAX.WARN}% for 5
      min)
    priority: WARNING
    description: Active sessions are using more than `{$ORACLE.SESSIONS.MAX.WARN}`%
      of the available sessions.
    tags:
    - tag: scope
      value: capacity
  - uuid: 0e1bb0a319444b3ba8a7199114562b98
    expression: min(/Oracle by ODBC SDL/oracle.db_files_count,5m) * 100 / last(/Oracle
      by ODBC SDL/oracle.db_files_limit) > {$ORACLE.DB.FILE.MAX.WARN}
    name: Too many database files
    event_name: Too many database files (over {$ORACLE.DB.FILE.MAX.WARN}% for 5 min)
    priority: WARNING
    description: The number of datafiles is higher than `{$ORACLE.DB.FILE.MAX.WARN}`%
      of the available datafile limit.
    tags:
    - tag: scope
      value: capacity
  - uuid: bbf86d6a973042e58722b8be1c721213
    expression: min(/Oracle by ODBC SDL/oracle.total_pga_used,5m) * 100 / last(/Oracle
      by ODBC SDL/oracle.pga_target) > {$ORACLE.PGA.USE.MAX.WARN}
    name: Total PGA inuse is too high
    event_name: Total PGA inuse is too high (over {$ORACLE.PGA.USE.MAX.WARN}% for
      5 min)
    priority: WARNING
    description: The total PGA currently consumed by work areas is more than `{$ORACLE.PGA.USE.MAX.WARN}`%
      of `PGA_AGGREGATE_TARGET`.
    tags:
    - tag: scope
      value: capacity
  graphs:
  - uuid: ce5b431ce91b4c488f6033f3bb109cbb
    name: 'Oracle: Cache Hit Ratios'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.buffer_cache_hit_ratio
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.library_cache_hit_ratio
  - uuid: 80251b27c5284d5ba53f509de5013255
    name: 'Oracle: Datafiles'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.db_files_count
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.db_files_limit
  - uuid: 57a781df470740c79627b421d2f3a576
    name: 'Oracle: PGA'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.total_pga_used
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.pga_target
    - sortorder: '2'
      color: 00611C
      item:
        host: Oracle by ODBC SDL
        key: oracle.total_pga_allocated
  - uuid: 723299e23ceb4c63aa97879ab35d364a
    name: 'Oracle: Physical Read\Write Rate'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.physical_writes_rate
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.physical_reads_rate
  - uuid: 478d7b4077d748e3a5ae128fb1adc7f4
    name: 'Oracle: Physical Read\Write Rate, Bytes'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.physical_write_bytes_rate
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.physical_read_bytes_rate
  - uuid: d9f451c436cb4cf680d38638ef755dfb
    name: 'Oracle: Processes'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.processes_count
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.processes_limit
  - uuid: 385b831aa0184a69870b7aac21ed4316
    name: 'Oracle: Sessions'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.session_count
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.session_active_background
    - sortorder: '2'
      color: 00611C
      item:
        host: Oracle by ODBC SDL
        key: oracle.session_inactive_user
    - sortorder: '3'
      color: F7941D
      item:
        host: Oracle by ODBC SDL
        key: oracle.session_active_user
    - sortorder: '4'
      color: FC6EA3
      item:
        host: Oracle by ODBC SDL
        key: oracle.session_limit
  - uuid: 12ceb785d4cd4cdda3ad74bd7e55340b
    name: 'Oracle: SGA Memory Usage'
    type: STACKED
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.sga_java_pool
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.sga_large_pool
    - sortorder: '2'
      color: 00611C
      item:
        host: Oracle by ODBC SDL
        key: oracle.sga_shared_pool
    - sortorder: '3'
      color: F7941D
      item:
        host: Oracle by ODBC SDL
        key: oracle.sga_log_buffer
    - sortorder: '4'
      color: FC6EA3
      item:
        host: Oracle by ODBC SDL
        key: oracle.sga_fixed
    - sortorder: '5'
      color: 6C59DC
      item:
        host: Oracle by ODBC SDL
        key: oracle.sga_buffer_cache
  - uuid: ca193ec56b214ddd9d66f2adf015e428
    name: 'Oracle: Sort Operations'
    graph_items:
    - color: 199C0D
      item:
        host: Oracle by ODBC SDL
        key: oracle.memory_sorts_ratio
    - sortorder: '1'
      color: F63100
      item:
        host: Oracle by ODBC SDL
        key: oracle.disk_sorts
